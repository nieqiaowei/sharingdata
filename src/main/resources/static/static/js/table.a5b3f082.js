(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"10cb":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var l=a("c1fb"),s=a("da71"),o=function(e){return Object(l["a"])({url:s["a"]["dataUrl"]+"/getuserinfos",method:"get",params:e})},r=function(e){return Object(l["a"])({url:s["a"]["dataUrl"]+"/saveinfo",method:"get",params:e})},i=function(e){return Object(l["a"])({url:s["a"]["dataUrl"]+"/deleteinfo",method:"get",params:e})}},"17fb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("系统信息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.saveEdit}},[e._v("修改")])],1),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.systemid,callback:function(t){e.$set(e.form,"systemid",t)},expression:"form.systemid"}}),a("el-form-item",{attrs:{label:"系统名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.sysname,callback:function(t){e.$set(e.form,"sysname",t)},expression:"form.sysname"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"系统地址"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.sysaddress,callback:function(t){e.$set(e.form,"sysaddress",t)},expression:"form.sysaddress"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"支持的操作类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"消息体名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"证书码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",clearable:""},model:{value:e.form.license,callback:function(t){e.$set(e.form,"license",t)},expression:"form.license"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"公钥"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",disabled:!0},model:{value:e.form.public_key,callback:function(t){e.$set(e.form,"public_key",t)},expression:"form.public_key"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"私钥"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容",disabled:!0},model:{value:e.form.private_key,callback:function(t){e.$set(e.form,"private_key",t)},expression:"form.private_key"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"系统到期时间"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.overtime,callback:function(t){e.$set(e.form,"overtime",t)},expression:"form.overtime"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1)])],1)},s=[],o=a("365c"),r={name:"basetable",data:function(){return{form:{}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.sysinfo,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.form=a.data:e.$message.warning("系统已过期！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.syssaveinfo;e.form["loginName"]=localStorage.getItem("ms_username");var l=e.form;Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功")):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))}}},i=r,n=(a("d4a1"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"14abf17f",null);t["default"]=c.exports},"1a4a":function(e,t,a){},"227a":function(e,t,a){"use strict";var l=a("c058"),s=a.n(l);s.a},"28db":function(e,t,a){"use strict";var l=a("c26c"),s=a.n(l);s.a},"2fcc":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据角色名称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据角色代码",clearable:""},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.row.dataRoleSources,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"datasourcerolename",label:"业务名称"}}),a("el-table-column",{attrs:{prop:"datasourcerolecode",label:"业务代码"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"code",label:"代码"}}),a("el-table-column",{attrs:{prop:"createtime",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.id?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"业务"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.form.dataRoleSources,callback:function(t){e.$set(e.form,"dataRoleSources",t)},expression:"form.dataRoleSources"}},e._l(e.dataproducers,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)]],2),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",code:"",pageIndex:1,pageSize:10},pageTotal:0,tableData:[],dataproducers:[],dataproducersid:[],form:{},addVisible:!1,checkAll:!1,isIndeterminate:!0}},created:function(){this.getData(),this.dataproducerinfos()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.dataroleinfos,l={};l={name:this.$data.query.name,code:this.$data.query.code,pageIndex:e.$data.query.pageIndex,pageSize:e.$data.query.pageSize,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},dataproducerinfos:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.dataproducerinfos,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;if(200==a.code){var l=a.data;l.map((function(t,a){var l=t.id;e.dataproducersid.push(l)})),e.dataproducers=l,e.pageTotal=a.total||10}else 404===a.code&&(e.dataproducers=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleCheckAllChange:function(e){this.form.dataRoleSources=e?this.dataproducersid:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.dataproducers.length,this.isIndeterminate=t>0&&t<this.dataproducers.length},handleSearch:function(){this.getData()},handleEdit:function(e,t){if(-1==e){var a={id:"",name:"",code:"",dataRoleSources:[]};this.form=a,this.addVisible=!0}else{var l=t.dataRoleSources,s=[];for(var o in l)s.push(l[o].datasourceroleid);t["dataRoleSources"]=s,this.form=t,this.addVisible=!0}},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveroleinfo,l=e.form;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)})),e.$set(e.query,"pageIndex",1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.id)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.delroleinfo,s={id:e};s["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.$data.query.pageIndex=e,this.getData()}}},i=r,n=(a("3bb5"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"54d60914",null);t["default"]=c.exports},"342c":function(e,t,a){},"38c0":function(e,t,a){"use strict";var l=a("d9db"),s=a.n(l);s.a},"3bb5":function(e,t,a){"use strict";var l=a("f419"),s=a.n(l);s.a},"40aa":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},[a("el-option",{key:"",attrs:{label:"无",value:""}}),a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户账号",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加生产业务")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"私钥:"}},[a("el-input",{model:{value:t.row.private_key,callback:function(a){e.$set(t.row,"private_key",a)},expression:"props.row.private_key"}})],1),a("el-form-item",{attrs:{label:"公钥:"}},[a("el-input",{model:{value:t.row.public_key,callback:function(a){e.$set(t.row,"public_key",a)},expression:"props.row.public_key"}})],1),a("el-form-item",{attrs:{label:"用户密码:"}},[a("span",[e._v(e._s(t.row.password))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户账号"}}),a("el-table-column",{attrs:{prop:"name",label:"用户姓名"}}),a("el-table-column",{attrs:{prop:"typeName",label:"用户类型"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"createName",label:"操作员"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.userid,callback:function(t){e.$set(e.form,"userid",t)},expression:"form.userid"}}),a("el-form-item",{attrs:{label:"用户账号"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.usernameClass,style:e.usernameColor})])],1)],1),a("el-form-item",{attrs:{label:"用户密码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]:[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型",disabled:!0},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]],2),a("el-col",{attrs:{span:1}})],1)],1),a("div",{style:e.ConsumeruserStyle,attrs:{id:"Consumeruser"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("消费的业务")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handleConsumerEdit(-1,null)}}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.Consumerusers,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"business_code",label:"业务代码"}}),a("el-table-column",{attrs:{prop:"fields",label:"业务字段"}}),a("el-table-column",{attrs:{prop:"push",label:"是否推送"}}),a("el-table-column",{attrs:{prop:"pushadress",label:"推送的地址"}}),a("el-table-column",{attrs:{prop:"pushtopic",label:"推送频道"}}),a("el-table-column",{attrs:{prop:"pushtag",label:"推送tag"}}),a("el-table-column",{attrs:{prop:"oldaddress",label:"获取数据地址"}}),a("el-table-column",{attrs:{prop:"overdueteime",label:"到期时间"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleConsumerEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleConsumerDataDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),a("div",{style:e.ProduceruserStyle,attrs:{id:"Produceruser"}},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.business_codeClass,style:e.business_codeColor})])],1)],1),a("el-form-item",{attrs:{label:"业务名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.producer.business_name,callback:function(t){e.$set(e.producer,"business_name",t)},expression:"producer.business_name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据表名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.tableNameClass,style:e.tableNameColor})])],1)],1),a("el-form-item",{attrs:{label:"数据接收地址","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.address,callback:function(t){e.$set(e.producer,"address",t)},expression:"producer.address"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据接收的格式","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.dataformat,callback:function(t){e.$set(e.producer,"dataformat",t)},expression:"producer.dataformat"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设计表")]),""==e.form.userid?[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handlefieldEdit(-1,null)}}},[e._v("添加字段")])]:void 0],2),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableoffields,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"fieldNamekey",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"fieldTypekey",label:"字段类型"}}),a("el-table-column",{attrs:{prop:"fieldLengthkey",label:"字段长度"}}),a("el-table-column",{attrs:{prop:"decimalkey",label:"字段小数点数"}}),a("el-table-column",{attrs:{prop:"nonullkey",label:"是否为空",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"commentkey",label:"数据描述"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),""==e.form.userid?[a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handlefieldEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handlefieldDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3654279460)})]:void 0],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveadd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑字段",visible:e.editfieldVisible,width:"30%"},on:{"update:visible":function(t){e.editfieldVisible=t}}},[a("el-form",{ref:"Tableoffield",attrs:{model:e.Tableoffield}},[a("el-form-item",{attrs:{label:"字段名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.Tableoffield.fieldNamekey,callback:function(t){e.$set(e.Tableoffield,"fieldNamekey",t)},expression:"Tableoffield.fieldNamekey"}})],1),a("el-col",{attrs:{span:2}},[a("i",{class:e.fieldNamekeyClass,style:e.fieldNamekeyColor})])],1)],1),a("el-form-item",{attrs:{label:"字段类型","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段类型"},on:{change:e.verificationfield},model:{value:e.Tableoffield.fieldTypekey,callback:function(t){e.$set(e.Tableoffield,"fieldTypekey",t)},expression:"Tableoffield.fieldTypekey"}},[a("el-option",{key:"varchar",attrs:{label:"varchar",value:"varchar"}}),a("el-option",{key:"longtext",attrs:{label:"longtext",value:"longtext"}}),a("el-option",{key:"double",attrs:{label:"double",value:"double"}}),a("el-option",{key:"int",attrs:{label:"int",value:"int"}}),a("el-option",{key:"float",attrs:{label:"float",value:"float"}}),a("el-option",{key:"datetime",attrs:{label:"datetime",value:"datetime"}}),a("el-option",{key:"date",attrs:{label:"date",value:"date"}})],1)],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段长度","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.fieldLengthkey,callback:function(t){e.$set(e.Tableoffield,"fieldLengthkey",t)},expression:"Tableoffield.fieldLengthkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段小数点数","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.decimalkey,callback:function(t){e.$set(e.Tableoffield,"decimalkey",t)},expression:"Tableoffield.decimalkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"数据描述","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.commentkey,callback:function(t){e.$set(e.Tableoffield,"commentkey",t)},expression:"Tableoffield.commentkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否为空","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.Tableoffield.nonullkey,callback:function(t){e.$set(e.Tableoffield,"nonullkey",t)},expression:"Tableoffield.nonullkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"主键","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.Tableoffield.primary_key,callback:function(t){e.$set(e.Tableoffield,"primary_key",t)},expression:"Tableoffield.primary_key"}})],1),a("el-col",{attrs:{span:2}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editfieldVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savefieldEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editConsumerVisible,width:"60%"},on:{"update:visible":function(t){e.editConsumerVisible=t}}},[a("el-form",{ref:"consumer",attrs:{model:e.consumer}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.consumer.id,callback:function(t){e.$set(e.consumer,"id",t)},expression:"consumer.id"}}),a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"业务代码"},on:{change:e.businesscheck},model:{value:e.consumer.business_code,callback:function(t){e.$set(e.consumer,"business_code",t)},expression:"consumer.business_code"}},e._l(e.business,(function(e){return a("el-option",{key:e.business_code,attrs:{label:e.business_name,value:e.business_code}})})),1)],1),a("el-form-item",{attrs:{label:"业务字段","label-width":"110px"}},[[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.consumer.fields,callback:function(t){e.$set(e.consumer,"fields",t)},expression:"consumer.fields"}},e._l(e.businessfields,(function(t){return a("el-checkbox",{key:t.fieldNamekey,attrs:{label:t}},[e._v(e._s(t.commentkey))])})),1)]],2),a("el-form-item",{attrs:{label:"查询条件","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段名称"},model:{value:e.sqlckey,callback:function(t){e.sqlckey=t},expression:"sqlckey"}},e._l(e.businessfields,(function(e){return a("el-option",{key:e.fieldNamekey,attrs:{label:e.commentkey,value:e.fieldNamekey}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"判定条件"},model:{value:e.sqltype,callback:function(t){e.sqltype=t},expression:"sqltype"}},[a("el-option",{key:"=",attrs:{label:"=",value:"="}}),a("el-option",{key:"!=",attrs:{label:"!=",value:"!="}}),a("el-option",{key:"like",attrs:{label:"like",value:"like"}})],1),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"内容",clearable:""},model:{value:e.sqlcvalue,callback:function(t){e.sqlcvalue=t},expression:"sqlcvalue"}}),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"合并条件"},model:{value:e.sqlmerge,callback:function(t){e.sqlmerge=t},expression:"sqlmerge"}},[a("el-option",{key:"and",attrs:{label:"and",value:"and"}}),a("el-option",{key:"or",attrs:{label:"or",value:"or"}}),a("el-option",{key:"",attrs:{label:"",value:""}})],1),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.setsql(!0)}}},[e._v("添加")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.setsql(!1)}}},[e._v("清空")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"开启自定义查询","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.customize,callback:function(t){e.$set(e.consumer,"customize",t)},expression:"consumer.customize"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[1==e.consumer.customize?[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容"},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]:[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容",disabled:!0},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]],2),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL备注","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-tag",{attrs:{type:"warning"}},[e._v("动态传参的输入格式${xxxx} 例如：${roadId}")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否推送","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.push,callback:function(t){e.$set(e.consumer,"push",t)},expression:"consumer.push"}})],1),a("el-col",{attrs:{span:2}})],1)],1),1==e.consumer.push?[a("el-form-item",{attrs:{label:"推送地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushadress,callback:function(t){e.$set(e.consumer,"pushadress",t)},expression:"consumer.pushadress"}})],1),a("el-form-item",{attrs:{label:"推送频道","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtopic,callback:function(t){e.$set(e.consumer,"pushtopic",t)},expression:"consumer.pushtopic"}})],1),a("el-form-item",{attrs:{label:"推送tag","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtag,callback:function(t){e.$set(e.consumer,"pushtag",t)},expression:"consumer.pushtag"}})],1)]:void 0,a("el-form-item",{attrs:{label:"数据获取地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:"",disabled:!0},model:{value:e.consumer.oldaddress,callback:function(t){e.$set(e.consumer,"oldaddress",t)},expression:"consumer.oldaddress"}})],1),a("el-form-item",{attrs:{label:"到期时间","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:""},model:{value:e.consumer.overdueteime,callback:function(t){e.$set(e.consumer,"overdueteime",t)},expression:"consumer.overdueteime"}})],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editConsumerVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConsumerEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=a("10cb"),r=a("f0dd"),i={name:"basetable",data:function(){return{query:{username:"",type:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,pageTotal:0,form:{},producer:{},consumer:{},idx:-1,id:-1,ProduceruserStyle:"display:none",ConsumeruserStyle:"display:none",editfieldVisible:!1,tableoffields:[],Consumerusers:[],Tableoffield:{},fieldEditOK:!0,fieldNamekeyClass:"el-icon-circle-close",fieldNamekeyColor:"color:#F56C6C",business_codeClass:"el-icon-circle-close",business_codeColor:"color:#F56C6C",tableNameClass:"el-icon-circle-close",tableNameColor:"color:#F56C6C",usernameClass:"el-icon-circle-close",usernameColor:"color:#F56C6C",editConsumerVisible:!1,business:[],businessfields:[],checkAll:!1,isIndeterminate:!0,editConsumerparamVisible:!1,sqlmerge:"",sqlckey:"",sqltype:"",sqlcvalue:""}},created:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},methods:{getData:function(e,t,a){var l=this,s={};s={username:e,type:t,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},s["page"]=a;var r=[];Object(o["c"])(s).then((function(e){if(200===e.data.code){var t=e.data.data;t.map((function(e,t){var a="",l=e.type;a="1"==l?"管理员":"2"==l?"生产者":"消费者",e["typeName"]=a,r.push(e)})),l.tableData=r,l.pageTotal=e.data.total||10}else 404===e.data.code?(l.tableData=[],l.pageTotal=e.data.total||10):209===e.data.code&&(l.$message.error("登录失效，请重新登录！"),l.$router.push("/login"))}))},handleSearch:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteUserInfo(t.userid),a.$set(a.query,"pageIndex",1)})).catch((function(){}))},deleteUserInfo:function(e){var t=this;if(null!=e){var a={};a={userid:e,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["a"])(a).then((function(e){200===e.data.code?(t.getData(t.$data.query.username,t.$data.query.type,1),t.$message.success("删除成功")):t.$message.error("请求数据异常！")}))}else this.$message.error("未获取到用户id信息")},handleEdit:function(e,t){var a=this;if(-1==e){var l={userid:"",username:"",password:"",name:"",type:""};this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none",this.usernameClass="el-icon-circle-close",this.usernameColor="color:#F56C6C",this.business_codeClass="el-icon-circle-close",this.business_codeColor="color:#F56C6C",this.tableNameClass="el-icon-circle-close",this.tableNameColor="color:#F56C6C",this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.tableoffields=[],this.producer={},this.form=l,this.addVisible=!0}else{if(this.usernameClass="el-icon-circle-check",this.usernameColor="color:#67C23A",this.business_codeClass="el-icon-circle-check",this.business_codeColor="color:#67C23A",this.tableNameClass="el-icon-circle-check",this.tableNameColor="color:#67C23A",this.idx=e,this.form=t,1==this.form.type)this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none";else if(2==this.form.type){this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none";var s={};s={userid:this.form.userid,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(e){if(200===e.data.code){var t=e.data.data[0];a.producer=t,a.tableoffields=t.tableoffields,console.info(t),a.pageTotal=e.data.total||10}else 404===e.data.code?(a.tableData=[],a.pageTotal=e.data.total||10):209===e.data.code&&(a.$message.error("登录失效，请重新登录！"),a.$router.push("/login"))}))}else 3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block");this.addVisible=!0}},saveadd:function(){var e=this;this.producer["tableoffields"]=this.tableoffields,this.form["produceruser"]=this.producer,this.form["loginName"]=localStorage.getItem("ms_username"),this.form["token"]=localStorage.getItem("token");var t=this.verificationfield();t?Object(o["b"])(this.form).then((function(t){200===t.data.code?(e.getData(e.$data.query.username,e.$data.query.type,1),e.$set(e.query,"pageIndex",1),e.addVisible=!1,e.$message.success("保存成功")):(e.$message.error("请求数据异常！"),e.addVisible=!0)})):(this.$message.error("请检查表单！"),this.addVisible=!0)},getUserType:function(){1==this.form.type?(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none"):2==this.form.type?(this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none"):3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block")},handlefieldEdit:function(e,t){-1==e?(this.Tableoffield={tableNamekey:"",fieldNamekey:"",fieldTypekey:"varchar",fieldLengthkey:"255",decimalkey:"0",nonullkey:!0,commentkey:"",primary_key:!1},this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.fieldEditOK=!1):(this.Tableoffield=t,this.fieldEditOK=!0),this.editfieldVisible=!0},handlefieldDelete:function(e,t){this.editfieldVisible=!1;var a=[];if(""==t.tableNamekey||void 0==t.tableNamekey)for(var l=0;l<this.tableoffields.length;l++)this.tableoffields[l]!=t&&a.push(this.tableoffields[l]);else for(l=0;l<this.tableoffields.length;l++)this.tableoffields[l].id==t.id||a.push(this.tableoffields[l]);this.tableoffields=a},savefieldEdit:function(){var e=this.verificationfield();e?(this.fieldEditOK||this.tableoffields.push(this.Tableoffield),this.Tableoffield={},this.editfieldVisible=!1):this.$message.error("请检查表单！")},verificationfield:function(){var e=this,t=!0;if(void 0!=this.form.username&&""!=this.form.username){if("el-icon-circle-close"==this.usernameClass)if(this.form.username.length>0){var a={};a={username:this.form.username,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["c"])(a).then((function(a){200==a.data.code?(e.usernameClass="el-icon-circle-close",e.usernameColor="color:#F56C6C",e.$message.error("用户名已存在，请重新输入！"),t=!1):404==a.data.code?(e.usernameClass="el-icon-circle-check",e.usernameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.business_code&&""!=this.producer.business_code){if("el-icon-circle-close"==this.business_codeClass)if(this.producer.business_code.length>0){var l={};l={business_code:this.producer.business_code,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(l).then((function(a){200==a.data.code?(e.business_codeClass="el-icon-circle-close",e.business_codeColor="color:#F56C6C",e.$message.error("业务代码已存在，请重新输入！"),t=!1):404==a.data.code?(e.business_codeClass="el-icon-circle-check",e.business_codeColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.tableName&&""!=this.producer.tableName){if("el-icon-circle-close"==this.tableNameClass)if(this.producer.tableName.length>0){var s={};s={tableName:this.producer.tableName,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(a){200==a.data.code?(e.tableNameClass="el-icon-circle-close",e.tableNameColor="color:#F56C6C",e.$message.error("业务表名称已存在，请重新输入！"),t=!1):404==a.data.code?(e.tableNameClass="el-icon-circle-check",e.tableNameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0==this.Tableoffield.fieldNamekey&&this.tableoffields.length>0);else{if(void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey){if(!this.fieldEditOK&&this.Tableoffield.fieldNamekey.length>0){var i=!1;if(this.tableoffields.length>0)for(var n=0;n<this.tableoffields.length;n++)if(this.tableoffields[n].fieldNamekey==this.Tableoffield.fieldNamekey){i=!0;break}i?(this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.$message.error("字段名称重复，请重新输入！"),t=!1):(this.fieldNamekeyClass="el-icon-circle-check",this.fieldNamekeyColor="color:#67C23A")}}else t=!1;void 0!=this.Tableoffield.commentkey&&""!=this.Tableoffield.commentkey?0==this.Tableoffield.commentkey.length&&(t=!1):t=!1,void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey||0==this.tableoffields.length&&(t=!1),"longtext"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0,1==this.Tableoffield.primary_key&&(this.$message.error("该类型字段不能设置主键！"),this.Tableoffield.primary_key=!1,t=!1)):"date"==this.Tableoffield.fieldTypekey||"datetime"==this.Tableoffield.fieldTypekey||"double"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0):0==this.Tableoffield.fieldLengthkey&&(this.Tableoffield.fieldLengthkey=255,this.Tableoffield.decimalkey=0),1==this.Tableoffield.primary_key&&("varchar"==this.Tableoffield.fieldTypekey?this.Tableoffield.fieldLengthkey>100&&(this.$message.error("字段长度大于100，请设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1):(this.$message.error("该类型字段不能设置主键，请选择varcahr类型字段，并长度设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1))}return t},handleConsumerEdit:function(e,t){this.sqlckey="",this.sqltype="",this.sqlcvalue="",this.sqlmerge="",-1==e&&(this.consumer={id:"",business_code:"",fields:[],push:!1,customize:!1,pushadress:"",oldaddress:"",overdueteime:new Date,pushtopic:"",pushtag:"",sql:""}),this.getbusiness(),this.editConsumerVisible=!0},getbusiness:function(){var e=this,t={};t={loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(t).then((function(t){200==t.data.code?e.business=t.data.data:404==t.data.code?e.business=[]:e.$message.error("请求数据异常！")}))},businesscheck:function(){for(var e=this.business,t=0;t<e.length;t++)if(e[t].business_code==this.consumer.business_code){this.businessfields=e[t].tableoffields;break}},handleCheckAllChange:function(e){this.consumer.fields=e?this.businessfields:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.consumer.fields.length,this.consumer.fields.length==this.businessfields.length&&t>0?this.isIndeterminate=!1:this.isIndeterminate=!0},setsql:function(e){1==e?(this.consumer.sql=this.consumer.sql+this.sqlckey+"  "+this.sqltype+"  '"+this.sqlcvalue+"'  "+this.sqlmerge+"  ",alert(this.consumer.sql)):this.consumer.sql=""},saveConsumerEdit:function(){this.Consumerusers.push(this.consumer)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData(this.query.citycode,e)},formatBoolean:function(e,t,a){var l="";return l=a?"是":"否",l}}},n=i,c=(a("6863"),a("2877")),d=Object(c["a"])(n,l,s,!1,null,"008d9600",null);t["default"]=d.exports},4127:function(e,t,a){"use strict";var l=a("d233"),s=a("b313"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r=Date.prototype.toISOString,i={delimiter:"&",encode:!0,encoder:l.encode,encodeValuesOnly:!1,serializeDate:function(e){return r.call(e)},skipNulls:!1,strictNullHandling:!1},n=function e(t,a,s,o,r,n,c,d,u,f,m,p){var b=t;if("function"===typeof c)b=c(a,b);else if(b instanceof Date)b=f(b);else if(null===b){if(o)return n&&!p?n(a,i.encoder):a;b=""}if("string"===typeof b||"number"===typeof b||"boolean"===typeof b||l.isBuffer(b)){if(n){var h=p?a:n(a,i.encoder);return[m(h)+"="+m(n(b,i.encoder))]}return[m(a)+"="+m(String(b))]}var g,y=[];if("undefined"===typeof b)return y;if(Array.isArray(c))g=c;else{var v=Object.keys(b);g=d?v.sort(d):v}for(var k=0;k<g.length;++k){var w=g[k];r&&null===b[w]||(y=Array.isArray(b)?y.concat(e(b[w],s(a,w),s,o,r,n,c,d,u,f,m,p)):y.concat(e(b[w],a+(u?"."+w:"["+w+"]"),s,o,r,n,c,d,u,f,m,p)))}return y};e.exports=function(e,t){var a=e,r=t?l.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!==typeof r.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof r.delimiter?i.delimiter:r.delimiter,d="boolean"===typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,u="boolean"===typeof r.skipNulls?r.skipNulls:i.skipNulls,f="boolean"===typeof r.encode?r.encode:i.encode,m="function"===typeof r.encoder?r.encoder:i.encoder,p="function"===typeof r.sort?r.sort:null,b="undefined"!==typeof r.allowDots&&r.allowDots,h="function"===typeof r.serializeDate?r.serializeDate:i.serializeDate,g="boolean"===typeof r.encodeValuesOnly?r.encodeValuesOnly:i.encodeValuesOnly;if("undefined"===typeof r.format)r.format=s["default"];else if(!Object.prototype.hasOwnProperty.call(s.formatters,r.format))throw new TypeError("Unknown format option provided.");var y,v,k=s.formatters[r.format];"function"===typeof r.filter?(v=r.filter,a=v("",a)):Array.isArray(r.filter)&&(v=r.filter,y=v);var w,C=[];if("object"!==typeof a||null===a)return"";w=r.arrayFormat in o?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var x=o[w];y||(y=Object.keys(a)),p&&y.sort(p);for(var _=0;_<y.length;++_){var $=y[_];u&&null===a[$]||(C=C.concat(n(a[$],$,x,d,u,f?m:null,v,p,b,h,k,g)))}var S=C.join(c),q=!0===r.addQueryPrefix?"?":"";return S.length>0?q+S:""}},4328:function(e,t,a){"use strict";var l=a("4127"),s=a("9e6a"),o=a("b313");e.exports={formats:o,parse:s,stringify:l}},"454f":function(e,t,a){a("46a7");var l=a("584a").Object;e.exports=function(e,t,a){return l.defineProperty(e,t,a)}},"46a7":function(e,t,a){var l=a("63b6");l(l.S+l.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},4715:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},[a("el-option",{key:"",attrs:{label:"无",value:""}}),a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户账号",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加消费业务")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"私钥:"}},[a("el-input",{model:{value:t.row.private_key,callback:function(a){e.$set(t.row,"private_key",a)},expression:"props.row.private_key"}})],1),a("el-form-item",{attrs:{label:"公钥:"}},[a("el-input",{model:{value:t.row.public_key,callback:function(a){e.$set(t.row,"public_key",a)},expression:"props.row.public_key"}})],1),a("el-form-item",{attrs:{label:"用户密码:"}},[a("span",[e._v(e._s(t.row.password))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户账号"}}),a("el-table-column",{attrs:{prop:"name",label:"用户姓名"}}),a("el-table-column",{attrs:{prop:"typeName",label:"用户类型"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"createName",label:"操作员"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.userid,callback:function(t){e.$set(e.form,"userid",t)},expression:"form.userid"}}),a("el-form-item",{attrs:{label:"用户账号"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.usernameClass,style:e.usernameColor})])],1)],1),a("el-form-item",{attrs:{label:"用户密码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]:[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型",disabled:!0},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]],2),a("el-col",{attrs:{span:1}})],1)],1),a("div",{style:e.ConsumeruserStyle,attrs:{id:"Consumeruser"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("消费的业务")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handleConsumerEdit(-1,null)}}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.Consumerusers,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"business_code",label:"业务代码"}}),a("el-table-column",{attrs:{prop:"fields",label:"业务字段"}}),a("el-table-column",{attrs:{prop:"push",label:"是否推送"}}),a("el-table-column",{attrs:{prop:"pushadress",label:"推送的地址"}}),a("el-table-column",{attrs:{prop:"pushtopic",label:"推送频道"}}),a("el-table-column",{attrs:{prop:"pushtag",label:"推送tag"}}),a("el-table-column",{attrs:{prop:"oldaddress",label:"获取数据地址"}}),a("el-table-column",{attrs:{prop:"overdueteime",label:"到期时间"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleConsumerEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleConsumerDataDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),a("div",{style:e.ProduceruserStyle,attrs:{id:"Produceruser"}},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.business_codeClass,style:e.business_codeColor})])],1)],1),a("el-form-item",{attrs:{label:"业务名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.producer.business_name,callback:function(t){e.$set(e.producer,"business_name",t)},expression:"producer.business_name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据表名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.tableNameClass,style:e.tableNameColor})])],1)],1),a("el-form-item",{attrs:{label:"数据接收地址","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.address,callback:function(t){e.$set(e.producer,"address",t)},expression:"producer.address"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据接收的格式","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.dataformat,callback:function(t){e.$set(e.producer,"dataformat",t)},expression:"producer.dataformat"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设计表")]),""==e.form.userid?[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handlefieldEdit(-1,null)}}},[e._v("添加字段")])]:void 0],2),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableoffields,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"fieldNamekey",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"fieldTypekey",label:"字段类型"}}),a("el-table-column",{attrs:{prop:"fieldLengthkey",label:"字段长度"}}),a("el-table-column",{attrs:{prop:"decimalkey",label:"字段小数点数"}}),a("el-table-column",{attrs:{prop:"nonullkey",label:"是否为空",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"commentkey",label:"数据描述"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),""==e.form.userid?[a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handlefieldEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handlefieldDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3654279460)})]:void 0],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveadd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑字段",visible:e.editfieldVisible,width:"30%"},on:{"update:visible":function(t){e.editfieldVisible=t}}},[a("el-form",{ref:"Tableoffield",attrs:{model:e.Tableoffield}},[a("el-form-item",{attrs:{label:"字段名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.Tableoffield.fieldNamekey,callback:function(t){e.$set(e.Tableoffield,"fieldNamekey",t)},expression:"Tableoffield.fieldNamekey"}})],1),a("el-col",{attrs:{span:2}},[a("i",{class:e.fieldNamekeyClass,style:e.fieldNamekeyColor})])],1)],1),a("el-form-item",{attrs:{label:"字段类型","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段类型"},on:{change:e.verificationfield},model:{value:e.Tableoffield.fieldTypekey,callback:function(t){e.$set(e.Tableoffield,"fieldTypekey",t)},expression:"Tableoffield.fieldTypekey"}},[a("el-option",{key:"varchar",attrs:{label:"varchar",value:"varchar"}}),a("el-option",{key:"longtext",attrs:{label:"longtext",value:"longtext"}}),a("el-option",{key:"double",attrs:{label:"double",value:"double"}}),a("el-option",{key:"int",attrs:{label:"int",value:"int"}}),a("el-option",{key:"float",attrs:{label:"float",value:"float"}}),a("el-option",{key:"datetime",attrs:{label:"datetime",value:"datetime"}}),a("el-option",{key:"date",attrs:{label:"date",value:"date"}})],1)],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段长度","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.fieldLengthkey,callback:function(t){e.$set(e.Tableoffield,"fieldLengthkey",t)},expression:"Tableoffield.fieldLengthkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段小数点数","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.decimalkey,callback:function(t){e.$set(e.Tableoffield,"decimalkey",t)},expression:"Tableoffield.decimalkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"数据描述","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.commentkey,callback:function(t){e.$set(e.Tableoffield,"commentkey",t)},expression:"Tableoffield.commentkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否为空","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.Tableoffield.nonullkey,callback:function(t){e.$set(e.Tableoffield,"nonullkey",t)},expression:"Tableoffield.nonullkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"主键","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.Tableoffield.primary_key,callback:function(t){e.$set(e.Tableoffield,"primary_key",t)},expression:"Tableoffield.primary_key"}})],1),a("el-col",{attrs:{span:2}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editfieldVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savefieldEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editConsumerVisible,width:"60%"},on:{"update:visible":function(t){e.editConsumerVisible=t}}},[a("el-form",{ref:"consumer",attrs:{model:e.consumer}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.consumer.id,callback:function(t){e.$set(e.consumer,"id",t)},expression:"consumer.id"}}),a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"业务代码"},on:{change:e.businesscheck},model:{value:e.consumer.business_code,callback:function(t){e.$set(e.consumer,"business_code",t)},expression:"consumer.business_code"}},e._l(e.business,(function(e){return a("el-option",{key:e.business_code,attrs:{label:e.business_name,value:e.business_code}})})),1)],1),a("el-form-item",{attrs:{label:"业务字段","label-width":"110px"}},[[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.consumer.fields,callback:function(t){e.$set(e.consumer,"fields",t)},expression:"consumer.fields"}},e._l(e.businessfields,(function(t){return a("el-checkbox",{key:t.fieldNamekey,attrs:{label:t}},[e._v(e._s(t.commentkey))])})),1)]],2),a("el-form-item",{attrs:{label:"查询条件","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段名称"},model:{value:e.sqlckey,callback:function(t){e.sqlckey=t},expression:"sqlckey"}},e._l(e.businessfields,(function(e){return a("el-option",{key:e.fieldNamekey,attrs:{label:e.commentkey,value:e.fieldNamekey}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"判定条件"},model:{value:e.sqltype,callback:function(t){e.sqltype=t},expression:"sqltype"}},[a("el-option",{key:"=",attrs:{label:"=",value:"="}}),a("el-option",{key:"!=",attrs:{label:"!=",value:"!="}}),a("el-option",{key:"like",attrs:{label:"like",value:"like"}})],1),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"内容",clearable:""},model:{value:e.sqlcvalue,callback:function(t){e.sqlcvalue=t},expression:"sqlcvalue"}}),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"合并条件"},model:{value:e.sqlmerge,callback:function(t){e.sqlmerge=t},expression:"sqlmerge"}},[a("el-option",{key:"and",attrs:{label:"and",value:"and"}}),a("el-option",{key:"or",attrs:{label:"or",value:"or"}}),a("el-option",{key:"",attrs:{label:"",value:""}})],1),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.setsql(!0)}}},[e._v("添加")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.setsql(!1)}}},[e._v("清空")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"开启自定义查询","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.customize,callback:function(t){e.$set(e.consumer,"customize",t)},expression:"consumer.customize"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[1==e.consumer.customize?[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容"},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]:[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容",disabled:!0},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]],2),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL备注","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-tag",{attrs:{type:"warning"}},[e._v("动态传参的输入格式${xxxx} 例如：${roadId}")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否推送","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.push,callback:function(t){e.$set(e.consumer,"push",t)},expression:"consumer.push"}})],1),a("el-col",{attrs:{span:2}})],1)],1),1==e.consumer.push?[a("el-form-item",{attrs:{label:"推送地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushadress,callback:function(t){e.$set(e.consumer,"pushadress",t)},expression:"consumer.pushadress"}})],1),a("el-form-item",{attrs:{label:"推送频道","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtopic,callback:function(t){e.$set(e.consumer,"pushtopic",t)},expression:"consumer.pushtopic"}})],1),a("el-form-item",{attrs:{label:"推送tag","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtag,callback:function(t){e.$set(e.consumer,"pushtag",t)},expression:"consumer.pushtag"}})],1)]:void 0,a("el-form-item",{attrs:{label:"数据获取地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:"",disabled:!0},model:{value:e.consumer.oldaddress,callback:function(t){e.$set(e.consumer,"oldaddress",t)},expression:"consumer.oldaddress"}})],1),a("el-form-item",{attrs:{label:"到期时间","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:""},model:{value:e.consumer.overdueteime,callback:function(t){e.$set(e.consumer,"overdueteime",t)},expression:"consumer.overdueteime"}})],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editConsumerVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConsumerEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=a("10cb"),r=a("f0dd"),i={name:"basetable",data:function(){return{query:{username:"",type:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,pageTotal:0,form:{},producer:{},consumer:{},idx:-1,id:-1,ProduceruserStyle:"display:none",ConsumeruserStyle:"display:none",editfieldVisible:!1,tableoffields:[],Consumerusers:[],Tableoffield:{},fieldEditOK:!0,fieldNamekeyClass:"el-icon-circle-close",fieldNamekeyColor:"color:#F56C6C",business_codeClass:"el-icon-circle-close",business_codeColor:"color:#F56C6C",tableNameClass:"el-icon-circle-close",tableNameColor:"color:#F56C6C",usernameClass:"el-icon-circle-close",usernameColor:"color:#F56C6C",editConsumerVisible:!1,business:[],businessfields:[],checkAll:!1,isIndeterminate:!0,editConsumerparamVisible:!1,sqlmerge:"",sqlckey:"",sqltype:"",sqlcvalue:""}},created:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},methods:{getData:function(e,t,a){var l=this,s={};s={username:e,type:t,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},s["page"]=a;var r=[];Object(o["c"])(s).then((function(e){if(200===e.data.code){var t=e.data.data;t.map((function(e,t){var a="",l=e.type;a="1"==l?"管理员":"2"==l?"生产者":"消费者",e["typeName"]=a,r.push(e)})),l.tableData=r,l.pageTotal=e.data.total||10}else 404===e.data.code?(l.tableData=[],l.pageTotal=e.data.total||10):209===e.data.code&&(l.$message.error("登录失效，请重新登录！"),l.$router.push("/login"))}))},handleSearch:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteUserInfo(t.userid),a.$set(a.query,"pageIndex",1)})).catch((function(){}))},deleteUserInfo:function(e){var t=this;if(null!=e){var a={};a={userid:e,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["a"])(a).then((function(e){200===e.data.code?(t.getData(t.$data.query.username,t.$data.query.type,1),t.$message.success("删除成功")):t.$message.error("请求数据异常！")}))}else this.$message.error("未获取到用户id信息")},handleEdit:function(e,t){var a=this;if(-1==e){var l={userid:"",username:"",password:"",name:"",type:""};this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none",this.usernameClass="el-icon-circle-close",this.usernameColor="color:#F56C6C",this.business_codeClass="el-icon-circle-close",this.business_codeColor="color:#F56C6C",this.tableNameClass="el-icon-circle-close",this.tableNameColor="color:#F56C6C",this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.tableoffields=[],this.producer={},this.form=l,this.addVisible=!0}else{if(this.usernameClass="el-icon-circle-check",this.usernameColor="color:#67C23A",this.business_codeClass="el-icon-circle-check",this.business_codeColor="color:#67C23A",this.tableNameClass="el-icon-circle-check",this.tableNameColor="color:#67C23A",this.idx=e,this.form=t,1==this.form.type)this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none";else if(2==this.form.type){this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none";var s={};s={userid:this.form.userid,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(e){if(200===e.data.code){var t=e.data.data[0];a.producer=t,a.tableoffields=t.tableoffields,console.info(t),a.pageTotal=e.data.total||10}else 404===e.data.code?(a.tableData=[],a.pageTotal=e.data.total||10):209===e.data.code&&(a.$message.error("登录失效，请重新登录！"),a.$router.push("/login"))}))}else 3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block");this.addVisible=!0}},saveadd:function(){var e=this;this.producer["tableoffields"]=this.tableoffields,this.form["produceruser"]=this.producer,this.form["loginName"]=localStorage.getItem("ms_username"),this.form["token"]=localStorage.getItem("token");var t=this.verificationfield();t?Object(o["b"])(this.form).then((function(t){200===t.data.code?(e.getData(e.$data.query.username,e.$data.query.type,1),e.$set(e.query,"pageIndex",1),e.addVisible=!1,e.$message.success("保存成功")):(e.$message.error("请求数据异常！"),e.addVisible=!0)})):(this.$message.error("请检查表单！"),this.addVisible=!0)},getUserType:function(){1==this.form.type?(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none"):2==this.form.type?(this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none"):3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block")},handlefieldEdit:function(e,t){-1==e?(this.Tableoffield={tableNamekey:"",fieldNamekey:"",fieldTypekey:"varchar",fieldLengthkey:"255",decimalkey:"0",nonullkey:!0,commentkey:"",primary_key:!1},this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.fieldEditOK=!1):(this.Tableoffield=t,this.fieldEditOK=!0),this.editfieldVisible=!0},handlefieldDelete:function(e,t){this.editfieldVisible=!1;var a=[];if(""==t.tableNamekey||void 0==t.tableNamekey)for(var l=0;l<this.tableoffields.length;l++)this.tableoffields[l]!=t&&a.push(this.tableoffields[l]);else for(l=0;l<this.tableoffields.length;l++)this.tableoffields[l].id==t.id||a.push(this.tableoffields[l]);this.tableoffields=a},savefieldEdit:function(){var e=this.verificationfield();e?(this.fieldEditOK||this.tableoffields.push(this.Tableoffield),this.Tableoffield={},this.editfieldVisible=!1):this.$message.error("请检查表单！")},verificationfield:function(){var e=this,t=!0;if(void 0!=this.form.username&&""!=this.form.username){if("el-icon-circle-close"==this.usernameClass)if(this.form.username.length>0){var a={};a={username:this.form.username,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["c"])(a).then((function(a){200==a.data.code?(e.usernameClass="el-icon-circle-close",e.usernameColor="color:#F56C6C",e.$message.error("用户名已存在，请重新输入！"),t=!1):404==a.data.code?(e.usernameClass="el-icon-circle-check",e.usernameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.business_code&&""!=this.producer.business_code){if("el-icon-circle-close"==this.business_codeClass)if(this.producer.business_code.length>0){var l={};l={business_code:this.producer.business_code,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(l).then((function(a){200==a.data.code?(e.business_codeClass="el-icon-circle-close",e.business_codeColor="color:#F56C6C",e.$message.error("业务代码已存在，请重新输入！"),t=!1):404==a.data.code?(e.business_codeClass="el-icon-circle-check",e.business_codeColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.tableName&&""!=this.producer.tableName){if("el-icon-circle-close"==this.tableNameClass)if(this.producer.tableName.length>0){var s={};s={tableName:this.producer.tableName,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(a){200==a.data.code?(e.tableNameClass="el-icon-circle-close",e.tableNameColor="color:#F56C6C",e.$message.error("业务表名称已存在，请重新输入！"),t=!1):404==a.data.code?(e.tableNameClass="el-icon-circle-check",e.tableNameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0==this.Tableoffield.fieldNamekey&&this.tableoffields.length>0);else{if(void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey){if(!this.fieldEditOK&&this.Tableoffield.fieldNamekey.length>0){var i=!1;if(this.tableoffields.length>0)for(var n=0;n<this.tableoffields.length;n++)if(this.tableoffields[n].fieldNamekey==this.Tableoffield.fieldNamekey){i=!0;break}i?(this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.$message.error("字段名称重复，请重新输入！"),t=!1):(this.fieldNamekeyClass="el-icon-circle-check",this.fieldNamekeyColor="color:#67C23A")}}else t=!1;void 0!=this.Tableoffield.commentkey&&""!=this.Tableoffield.commentkey?0==this.Tableoffield.commentkey.length&&(t=!1):t=!1,void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey||0==this.tableoffields.length&&(t=!1),"longtext"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0,1==this.Tableoffield.primary_key&&(this.$message.error("该类型字段不能设置主键！"),this.Tableoffield.primary_key=!1,t=!1)):"date"==this.Tableoffield.fieldTypekey||"datetime"==this.Tableoffield.fieldTypekey||"double"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0):0==this.Tableoffield.fieldLengthkey&&(this.Tableoffield.fieldLengthkey=255,this.Tableoffield.decimalkey=0),1==this.Tableoffield.primary_key&&("varchar"==this.Tableoffield.fieldTypekey?this.Tableoffield.fieldLengthkey>100&&(this.$message.error("字段长度大于100，请设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1):(this.$message.error("该类型字段不能设置主键，请选择varcahr类型字段，并长度设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1))}return t},handleConsumerEdit:function(e,t){this.sqlckey="",this.sqltype="",this.sqlcvalue="",this.sqlmerge="",-1==e&&(this.consumer={id:"",business_code:"",fields:[],push:!1,customize:!1,pushadress:"",oldaddress:"",overdueteime:new Date,pushtopic:"",pushtag:"",sql:""}),this.getbusiness(),this.editConsumerVisible=!0},getbusiness:function(){var e=this,t={};t={loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(t).then((function(t){200==t.data.code?e.business=t.data.data:404==t.data.code?e.business=[]:e.$message.error("请求数据异常！")}))},businesscheck:function(){for(var e=this.business,t=0;t<e.length;t++)if(e[t].business_code==this.consumer.business_code){this.businessfields=e[t].tableoffields;break}},handleCheckAllChange:function(e){this.consumer.fields=e?this.businessfields:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.consumer.fields.length,this.consumer.fields.length==this.businessfields.length&&t>0?this.isIndeterminate=!1:this.isIndeterminate=!0},setsql:function(e){1==e?(this.consumer.sql=this.consumer.sql+this.sqlckey+"  "+this.sqltype+"  '"+this.sqlcvalue+"'  "+this.sqlmerge+"  ",alert(this.consumer.sql)):this.consumer.sql=""},saveConsumerEdit:function(){this.Consumerusers.push(this.consumer)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData(this.query.citycode,e)},formatBoolean:function(e,t,a){var l="";return l=a?"是":"否",l}}},n=i,c=(a("bab0"),a("2877")),d=Object(c["a"])(n,l,s,!1,null,"7ea4f873",null);t["default"]=d.exports},4891:function(e,t,a){},5895:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户名",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户姓名",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加用户")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",[e._v("私钥")])]),a("tr",[a("td",[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},disabled:!0},model:{value:t.row.private_key,callback:function(a){e.$set(t.row,"private_key",a)},expression:"props.row.private_key"}})],1)]),a("tr",[a("td",[e._v("公钥")])]),a("tr",[a("td",[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},disabled:!0},model:{value:t.row.public_key,callback:function(a){e.$set(t.row,"public_key",a)},expression:"props.row.public_key"}})],1)]),a("tr",[a("td",[e._v("用户密码")])]),a("tr",[a("td",[e._v(e._s(t.row.password))])])])]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户账号"}}),a("el-table-column",{attrs:{prop:"name",label:"用户姓名"}}),a("el-table-column",{attrs:{prop:"roleName",label:"用户角色"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"createName",label:"操作员"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.userid,callback:function(t){e.$set(e.form,"userid",t)},expression:"form.userid"}}),a("el-form-item",{attrs:{label:"用户账号"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.usernameClass,style:e.usernameColor})])],1)],1),a("el-form-item",{attrs:{label:"用户密码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.roleid,callback:function(t){e.$set(e.form,"roleid",t)},expression:"form.roleid"}},e._l(e.roles,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",username:"",pageIndex:1,pageSize:10},pageTotal:0,roles:[],tableData:[],form:{},addVisible:!1}},created:function(){this.getData(1),this.getrolesData()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.getuserinfos,l={};l={name:this.$data.query.name,username:this.$data.query.username,loginName:localStorage.getItem("ms_username")},l["pageIndex"]=this.$data.query.pageIndex;Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},getrolesData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.dataroleinfos,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.roles=a.data:404===a.code&&(e.roles=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleSearch:function(){this.getData(1)},handleEdit:function(e,t){if(-1==e){var a={userid:"",name:"",username:"",password:"",roleid:"",roleName:"",createtime:""};this.form=a,this.addVisible=!0}else this.form=t,this.addVisible=!0},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveinfo;e.editVisible=!1,e.form["loginName"]=localStorage.getItem("ms_username");var l=e.form;Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)})),e.$set(e.query,"pageIndex",1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.userid)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.deleteinfo,s={};s={userid:e},s["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},verificationfield:function(){},usernameClass:function(){},usernameColor:function(){},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.$data.query.pageIndex=e,this.getData()}}},i=r,n=(a("38c0"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"30fd7a92",null);t["default"]=c.exports},"5c3f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("数据传输DEMO")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.runEdit}},[e._v("执行")])],1),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"业务代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.service,callback:function(t){e.$set(e.form,"service",t)},expression:"form.service"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"操作类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"发送消息体"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:12,maxRows:8},placeholder:"请输入内容"},model:{value:e.form.dataBody,callback:function(t){e.$set(e.form,"dataBody",t)},expression:"form.dataBody"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"返回数据集"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:12,maxRows:8},placeholder:"请输入内容"},model:{value:e.responseBody,callback:function(t){e.responseBody=t},expression:"responseBody"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1)])],1)},s=[],o=a("365c"),r={name:"basetable",data:function(){return{form:{},options:[{value:"select",label:"查询"},{value:"update",label:"更新"},{value:"delete",label:"删除"},{value:"insert",label:"新增"}],responseBody:""}},created:function(){},methods:{runEdit:function(){var e=this;e.responseBody="";var t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.layerinfo;e.form["loginName"]=localStorage.getItem("ms_username");var l=e.form;Object(o["a"])(a,l).then((function(t){var a=t;e.responseBody=JSON.stringify(a),e.$message.success("执行成功！")})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))}}},i=r,n=(a("b886"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"5fc967ef",null);t["default"]=c.exports},"5d1f":function(e,t,a){},6863:function(e,t,a){"use strict";var l=a("cf3b"),s=a.n(l);s.a},"6f86":function(e,t,a){},7159:function(e,t,a){e.exports=a.p+"static/img/img.146655c9.jpg"},7302:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据存储类型名称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加类型")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",[e._v("查询表SQL")])]),a("tr",[a("td",[e._v(e._s(t.row.tablesSql))])]),a("tr",[a("td",[e._v("查询表字段SQL")])]),a("tr",[a("td",[e._v(e._s(t.row.tableFieldSql))])])])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"driver_class_name",label:"驱动"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.id?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"驱动"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.driver_class_name,callback:function(t){e.$set(e.form,"driver_class_name",t)},expression:"form.driver_class_name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询表SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.tablesSql,callback:function(t){e.$set(e.form,"tablesSql",t)},expression:"form.tablesSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询表字段SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.tableFieldSql,callback:function(t){e.$set(e.form,"tableFieldSql",t)},expression:"form.tableFieldSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("c1fb"),a("da71"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",pageIndex:1,pageSize:10},pageTotal:0,tableData:[],form:{},addVisible:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.sourcetypeinfos,l={};l={name:e.$data.query.name,loginName:localStorage.getItem("ms_username"),pageIndex:e.$data.query.pageIndex,pageSize:e.$data.query.pageSize},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleSearch:function(){this.getData()},handleEdit:function(e,t){if(-1==e){var a={id:"",name:"",driver_class_name:"",tablesSql:"",tableFieldSql:""};this.form=a,this.addVisible=!0}else this.form=t,this.addVisible=!0},saveEdit:function(){this.editVisible=!1;var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.savesourcetypeinfo,l=e.form;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)})),e.$set(e.query,"pageIndex",1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.id)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.delsourcetypeinfoinfo,s={};s={id:e,loginName:localStorage.getItem("ms_username")},Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.$data.query.pageIndex=e,this.getData()}}},i=r,n=(a("e877"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"f3a1b4c4",null);t["default"]=c.exports},"75b6":function(e,t,a){"use strict";var l=a("1a4a"),s=a.n(l);s.a},"7b64":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据消费名称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据消费代码",clearable:""},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加消费任务")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleviewEdit(-1,null)}}},[e._v("发布视图数据")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",[e._v("接口地址")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.sysaddress))])]),a("tr",[a("td",[e._v("接口参数消息体")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.data))])]),a("tr",[a("td",[e._v("操作类型")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.type))])]),a("tr",[a("td",[e._v("查询参数")])]),a("tr",[a("td",[e._v(e._s(t.row.selectParameter))])])])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"code",label:"业务代码"}}),a("el-table-column",{attrs:{prop:"datasourcename",label:"数据源名称"}}),a("el-table-column",{attrs:{prop:"createtime",label:"修改时间"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑数据表数据",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-form-item",{attrs:{label:"数据源名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changedatasource},model:{value:e.form.datasourceid,callback:function(t){e.$set(e.form,"datasourceid",t)},expression:"form.datasourceid"}},e._l(e.datasources,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[(e.form.id,[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})])],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据表"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changedatacloumn},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}},e._l(e.tables,(function(e){return a("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"业务代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"生成SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createSql}},[e._v("生成")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"统计SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.countSql,callback:function(t){e.$set(e.form,"countSql",t)},expression:"form.countSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.selectSql,callback:function(t){e.$set(e.form,"selectSql",t)},expression:"form.selectSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"提取参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createparameter}},[e._v("提取")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.selectParameter,callback:function(t){e.$set(e.form,"selectParameter",t)},expression:"form.selectParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.cloumns,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"column_name",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"data_type",label:"字段类型"}})],1)],1),a("el-dialog",{attrs:{title:"编辑视图数据发布",visible:e.addViewVisible,width:"70%"},on:{"update:visible":function(t){e.addViewVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"formView",attrs:{model:e.formView,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.formView.id,callback:function(t){e.$set(e.formView,"id",t)},expression:"formView.id"}}),a("el-form-item",{attrs:{label:"数据源名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formView.datasourceid,callback:function(t){e.$set(e.formView,"datasourceid",t)},expression:"formView.datasourceid"}},e._l(e.datasources,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[(e.formView.id,[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.formView.name,callback:function(t){e.$set(e.formView,"name",t)},expression:"formView.name"}})])],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"业务代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formView.code,callback:function(t){e.$set(e.formView,"code",t)},expression:"formView.code"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.formView.selectSql,callback:function(t){e.$set(e.formView,"selectSql",t)},expression:"formView.selectSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"提取参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createViewparameter}},[e._v("提取")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"传输参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.formView.selectParameter,callback:function(t){e.$set(e.formView,"selectParameter",t)},expression:"formView.selectParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addViewVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveViewEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",code:"",tableName:"",type:"1",pageIndex:1,pageSize:10},pageTotal:0,datasources:[],tables:[],cloumns:[],tableData:[],form:{id:"",datasourceid:"",name:"",tableName:"",code:"",countSql:"",selectSql:"",countParameter:"",selectParameter:"",type:"1"},formView:{id:"",datasourceid:"",name:"",code:"",selectSql:"",selectParameter:"",type:"1"},addVisible:!1,addViewVisible:!1}},created:function(){this.getData(),this.getdatasourceinfos()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.dataproducerinfos,l={};l={name:e.$data.query.name,code:e.$data.query.code,tableName:e.$data.query.tableName,type:e.$data.query.type,pageIndex:e.$data.query.pageIndex,pageSize:e.$data.query.pageSize,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},getdatasourceinfos:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceinfos,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.datasources=a.data:404===a.code&&(e.datasources=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},changedatasource:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcetablesinfo,l={};l={id:e.form.datasourceid,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.tables=a.data:404===a.code&&(e.tables=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},changedatacloumn:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcecloumninfo;e.form.code=e.form.tableName;var l={};l={id:e.form.datasourceid,tableName:e.form.tableName,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.cloumns=a.data:404===a.code&&(e.cloumns=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleSearch:function(){this.getData()},handleEdit:function(e,t){if(-1==e){var a={id:"",datasourceid:"",name:"",tableName:"",code:"",countSql:"",selectSql:"",countParameter:"",selectParameter:"",type:this.$data.query.type};this.form=a,this.addVisible=!0,this.addViewVisible=!1}else this.form=t,""==this.form.tableName?this.handleviewEdit(e,t):(this.changedatasource(),this.changedatacloumn(),this.addVisible=!0,this.addViewVisible=!1)},handleviewEdit:function(e,t){if(-1==e){var a={id:"",datasourceid:"",name:"",code:"",selectSql:"",selectParameter:"",type:this.$data.query.type};this.formView=a,this.addVisible=!1,this.addViewVisible=!0}else this.formView=t,this.changedatasource(),this.addVisible=!1,this.addViewVisible=!0},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveproducerinfo,l=e.form;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1,e.$set(e.query,"pageIndex",1)):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},saveViewEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveproducerinfo,l=e.formView;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addViewVisible=!1,e.$set(e.query,"pageIndex",1)):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.id)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.delproducerinfo,s={id:e};s["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},createSql:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcesqlinfo,l={id:e.form.datasourceid,tableName:e.form.tableName};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.form.countSql=a.data.countSql,e.form.selectSql=a.data.selectSql,e.form.insertSql=a.data.insertSql,e.form.updateSql=a.data.updateSql,e.form.deleteSql=a.data.deleteSql):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},createparameter:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceparameterinfo,l={countSql:e.form.countSql,selectSql:e.form.selectSql};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.form.countParameter=a.data.countParameter,e.form.selectParameter=a.data.selectParameter):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},createViewparameter:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceparameterinfo,l={selectSql:e.formView.selectSql};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.formView.selectParameter=a.data.selectParameter:e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))}}},i=r,n=(a("75b6"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"d6fb4324",null);t["default"]=c.exports},"7ed4":function(e,t,a){"use strict";var l=a("2b0e"),s=new l["default"];t["a"]=s},"85f2":function(e,t,a){e.exports=a("454f")},"963e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("系统信息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.saveEdit}},[e._v("修改")])],1),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.systemid,callback:function(t){e.$set(e.form,"systemid",t)},expression:"form.systemid"}}),a("el-form-item",{attrs:{label:"系统名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.sysname,callback:function(t){e.$set(e.form,"sysname",t)},expression:"form.sysname"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"系统地址"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.sysaddress,callback:function(t){e.$set(e.form,"sysaddress",t)},expression:"form.sysaddress"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"支持的操作类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"消息体名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"证书码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",clearable:""},model:{value:e.form.license,callback:function(t){e.$set(e.form,"license",t)},expression:"form.license"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"公钥"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",disabled:!0},model:{value:e.form.public_key,callback:function(t){e.$set(e.form,"public_key",t)},expression:"form.public_key"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"私钥"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容",disabled:!0},model:{value:e.form.private_key,callback:function(t){e.$set(e.form,"private_key",t)},expression:"form.private_key"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"系统到期时间"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.overtime,callback:function(t){e.$set(e.form,"overtime",t)},expression:"form.overtime"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1)])],1)},s=[],o=a("365c"),r={name:"basetable",data:function(){return{form:{}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.sysinfo,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.form=a.data:e.$message.warning("系统已过期！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.syssaveinfo;e.form["loginName"]=localStorage.getItem("ms_username");var l=e.form;Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功")):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))}}},i=r,n=(a("28db"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"4685e216",null);t["default"]=c.exports},"9e6a":function(e,t,a){"use strict";var l=a("d233"),s=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:l.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(e,t){for(var a={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,i=l.split(t.delimiter,r),n=0;n<i.length;++n){var c,d,u=i[n],f=u.indexOf("]="),m=-1===f?u.indexOf("="):f+1;-1===m?(c=t.decoder(u,o.decoder),d=t.strictNullHandling?null:""):(c=t.decoder(u.slice(0,m),o.decoder),d=t.decoder(u.slice(m+1),o.decoder)),s.call(a,c)?a[c]=[].concat(a[c]).concat(d):a[c]=d}return a},i=function(e,t,a){for(var l=t,s=e.length-1;s>=0;--s){var o,r=e[s];if("[]"===r)o=[],o=o.concat(l);else{o=a.plainObjects?Object.create(null):{};var i="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,n=parseInt(i,10);!isNaN(n)&&r!==i&&String(n)===i&&n>=0&&a.parseArrays&&n<=a.arrayLimit?(o=[],o[n]=l):o[i]=l}l=o}return l},n=function(e,t,a){if(e){var l=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,n=o.exec(l),c=n?l.slice(0,n.index):l,d=[];if(c){if(!a.plainObjects&&s.call(Object.prototype,c)&&!a.allowPrototypes)return;d.push(c)}var u=0;while(null!==(n=r.exec(l))&&u<a.depth){if(u+=1,!a.plainObjects&&s.call(Object.prototype,n[1].slice(1,-1))&&!a.allowPrototypes)return;d.push(n[1])}return n&&d.push("["+l.slice(n.index)+"]"),i(d,t,a)}};e.exports=function(e,t){var a=t?l.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||l.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"===typeof a.depth?a.depth:o.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var s="string"===typeof e?r(e,a):e,i=a.plainObjects?Object.create(null):{},c=Object.keys(s),d=0;d<c.length;++d){var u=c[d],f=n(u,s[u],a);i=l.merge(i,f,a)}return l.compact(i)}},a077:function(e,t,a){"use strict";var l=a("5d1f"),s=a.n(l);s.a},b225:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据发布名称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据发布代码",clearable:""},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据发布表名称",clearable:""},model:{value:e.query.tableName,callback:function(t){e.$set(e.query,"tableName",t)},expression:"query.tableName"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("发布数据")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleviewEdit(-1,null)}}},[e._v("发布视图数据")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",[e._v("接口地址")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.sysaddress))])]),a("tr",[a("td",[e._v("接口参数消息体")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.data))])]),a("tr",[a("td",[e._v("操作类型")])]),a("tr",[a("td",[e._v(e._s(t.row.systemProPerties.type))])]),a("tr",[a("td",[e._v("查询参数")])]),a("tr",[a("td",[e._v(e._s(t.row.selectParameter))])]),a("tr",[a("td",[e._v("修改参数")])]),a("tr",[a("td",[e._v(e._s(t.row.updateParameter))])]),a("tr",[a("td",[e._v("新增参数")])]),a("tr",[a("td",[e._v(e._s(t.row.insertParameter))])]),a("tr",[a("td",[e._v("删除参数")])]),a("tr",[a("td",[e._v(e._s(t.row.deleteParameter))])])])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"code",label:"业务代码"}}),a("el-table-column",{attrs:{prop:"tableName",label:"表名称"}}),a("el-table-column",{attrs:{prop:"datasourcename",label:"数据源名称"}}),a("el-table-column",{attrs:{prop:"createtime",label:"修改时间"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑数据表数据发布",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-form-item",{attrs:{label:"数据源名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changedatasource},model:{value:e.form.datasourceid,callback:function(t){e.$set(e.form,"datasourceid",t)},expression:"form.datasourceid"}},e._l(e.datasources,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[(e.form.id,[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})])],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据表"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changedatacloumn},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}},e._l(e.tables,(function(e){return a("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"业务代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"生成SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createSql}},[e._v("生成")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"统计SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.countSql,callback:function(t){e.$set(e.form,"countSql",t)},expression:"form.countSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.selectSql,callback:function(t){e.$set(e.form,"selectSql",t)},expression:"form.selectSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"新增SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.insertSql,callback:function(t){e.$set(e.form,"insertSql",t)},expression:"form.insertSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"修改SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.updateSql,callback:function(t){e.$set(e.form,"updateSql",t)},expression:"form.updateSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"删除SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.deleteSql,callback:function(t){e.$set(e.form,"deleteSql",t)},expression:"form.deleteSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"提取参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createparameter}},[e._v("提取")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.selectParameter,callback:function(t){e.$set(e.form,"selectParameter",t)},expression:"form.selectParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"修改参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.updateParameter,callback:function(t){e.$set(e.form,"updateParameter",t)},expression:"form.updateParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"新增参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.insertParameter,callback:function(t){e.$set(e.form,"insertParameter",t)},expression:"form.insertParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"删除参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.form.deleteParameter,callback:function(t){e.$set(e.form,"deleteParameter",t)},expression:"form.deleteParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.cloumns,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"column_name",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"data_type",label:"字段类型"}})],1)],1),a("el-dialog",{attrs:{title:"编辑视图数据发布",visible:e.addViewVisible,width:"70%"},on:{"update:visible":function(t){e.addViewVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"formView",attrs:{model:e.formView,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.formView.id,callback:function(t){e.$set(e.formView,"id",t)},expression:"formView.id"}}),a("el-form-item",{attrs:{label:"数据源名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formView.datasourceid,callback:function(t){e.$set(e.formView,"datasourceid",t)},expression:"formView.datasourceid"}},e._l(e.datasources,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[(e.formView.id,[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.formView.name,callback:function(t){e.$set(e.formView,"name",t)},expression:"formView.name"}})])],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"业务代码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formView.code,callback:function(t){e.$set(e.formView,"code",t)},expression:"formView.code"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"查询SQL"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.formView.selectSql,callback:function(t){e.$set(e.formView,"selectSql",t)},expression:"formView.selectSql"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"提取参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createViewparameter}},[e._v("提取")])],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"传输参数"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.formView.selectParameter,callback:function(t){e.$set(e.formView,"selectParameter",t)},expression:"formView.selectParameter"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addViewVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveViewEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",code:"",tableName:"",type:"0",pageIndex:1,pageSize:10},pageTotal:0,datasources:[],tables:[],cloumns:[],tableData:[],form:{id:"",datasourceid:"",name:"",tableName:"",code:"",countSql:"",selectSql:"",insertSql:"",updateSql:"",deleteSql:"",countParameter:"",selectParameter:"",insertParameter:"",updateParameter:"",deleteParameter:"",type:"0"},formView:{id:"",datasourceid:"",name:"",code:"",selectSql:"",selectParameter:"",type:"0"},addVisible:!1,addViewVisible:!1}},created:function(){this.getData(),this.getdatasourceinfos()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.dataproducerinfos,l={};l={name:e.$data.query.name,code:e.$data.query.code,tableName:e.$data.query.tableName,type:e.$data.query.type,pageIndex:e.$data.query.pageIndex,pageSize:e.$data.query.pageSize,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},getdatasourceinfos:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceinfos,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.datasources=a.data:404===a.code&&(e.datasources=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},changedatasource:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcetablesinfo,l={};l={id:e.form.datasourceid,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.tables=a.data:404===a.code&&(e.tables=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},changedatacloumn:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcecloumninfo;e.form.code=e.form.tableName;var l={};l={id:e.form.datasourceid,tableName:e.form.tableName,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.cloumns=a.data:404===a.code&&(e.cloumns=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleSearch:function(){this.getData()},handleEdit:function(e,t){if(-1==e){var a={id:"",datasourceid:"",name:"",tableName:"",code:"",countSql:"",selectSql:"",insertSql:"",updateSql:"",deleteSql:"",countParameter:"",selectParameter:"",insertParameter:"",updateParameter:"",deleteParameter:"",type:this.$data.query.type};this.form=a,this.addVisible=!0,this.addViewVisible=!1}else this.form=t,""==this.form.tableName?this.handleviewEdit(e,t):(this.changedatasource(),this.changedatacloumn(),this.addVisible=!0,this.addViewVisible=!1)},handleviewEdit:function(e,t){if(-1==e){var a={id:"",datasourceid:"",name:"",code:"",selectSql:"",selectParameter:"",type:this.$data.query.type};this.formView=a,this.addVisible=!1,this.addViewVisible=!0}else this.formView=t,this.changedatasource(),this.addVisible=!1,this.addViewVisible=!0},saveEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveproducerinfo,l=e.form;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1,e.$set(e.query,"pageIndex",1)):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},saveViewEdit:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.saveproducerinfo,l=e.formView;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addViewVisible=!1,e.$set(e.query,"pageIndex",1)):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.id)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.delproducerinfo,s={id:e};s["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.$data.query.pageIndex=e,this.getData()},createSql:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourcesqlinfo,l={id:e.form.datasourceid,tableName:e.form.tableName};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.form.countSql=a.data.countSql,e.form.selectSql=a.data.selectSql,e.form.insertSql=a.data.insertSql,e.form.updateSql=a.data.updateSql,e.form.deleteSql=a.data.deleteSql):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},createparameter:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceparameterinfo,l={countSql:e.form.countSql,selectSql:e.form.selectSql,insertSql:e.form.insertSql,updateSql:e.form.updateSql,deleteSql:e.form.deleteSql};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.form.countParameter=a.data.countParameter,e.form.selectParameter=a.data.selectParameter,e.form.insertParameter=a.data.insertParameter,e.form.updateParameter=a.data.updateParameter,e.form.deleteParameter=a.data.deleteParameter):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},createViewparameter:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceparameterinfo,l={selectSql:e.formView.selectSql};l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.formView.selectParameter=a.data.selectParameter:e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))}}},i=r,n=(a("defd"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"6b66fd3e",null);t["default"]=c.exports},b313:function(e,t,a){"use strict";var l=String.prototype.replace,s=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return l.call(e,s,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b367:function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function t(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=window.devicePixelRatio||1,l=10*a,s=l/2;return function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.canvas=function(e){var t=document.getElementById(e),l=t.parentNode.clientWidth,s=t.parentNode.clientHeight;return t.style.width=l+"px",t.style.height=s+"px",t.width=l*a,t.height=s*a,t}(e),this.ctx=this.canvas.getContext("2d"),this.type="bar",this.showValue=!0,this.showGrid=!0,this.topPadding=60*a,this.leftPadding=50*a,this.rightPadding=10*a,this.bottomPadding=50*a,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.bgColor="#fff",this.axisColor="#666",this.gridColor="#eee",this.title={text:"",color:"#666",position:"top",font:"bold "+18*a+"px Arial",top:l,bottom:s},this.legend={display:!0,position:"top",color:"#666",font:14*a+"px Arial",top:45*a,bottom:15*a,textWidth:0},this.radius=100*a,this.innerRadius=60*a,this.colorList=["#4A90E2","#F5A623","#ff5858","#5e64ff","#2AC766","#743ee2","#b554ff","#199475"],this.init(t)}return function(t,a,l){a&&e(t.prototype,a),l&&e(t,l)}(o,[{key:"init",value:function(e){if(e.title=Object.assign({},this.title,e.title),e.legend=Object.assign({},this.legend,e.legend),Object.assign(this,e),!e.labels||!e.labels.length)throw new Error("缺少主要参数labels");if(!e.datasets||!e.datasets.length)throw new Error("缺少主要参数datasets");this.drawBackground(),"bar"===this.type||"line"===this.type?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:"renderBarChart",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-l)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-l)/this.labels.length),this.ySpace=function(e,a){var l=e.map((function(e){return e.data.reduce((function(e,t){return t<e?e:t}))})),s=Math.ceil(Math.max.apply(Math,t(l))/a),o=s.toString().length-1;return o=2<o?2:o,Math.ceil(s/Math.pow(10,o))*Math.pow(10,o)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:"drawBarContent",value:function(){var e=this.ctx,t=this.datasets.length;e.beginPath();for(var o=0;o<t;o++){e.font=this.legend.font,this.legend.textWidth+=Math.ceil(e.measureText(this.datasets[o].label).width),e.fillStyle=e.strokeStyle=this.datasets[o].fillColor||this.colorList[o];for(var r=this.datasets[o].data,i=0;i<r.length;i++)if(!(i>this.labels.length-1)){var n=this.xLength/(t+1),c=this.yLength/this.ySpace,d=this.leftPadding+this.xLength*i+n*(o+.5),u=d+n,f=this.canvas.height-this.bottomPadding,m=f-r[i]*c;if("bar"===this.type)e.fillRect(d,m,u-d,f-m),this.drawValue(r[i],d+n/2,m-s);else if("line"===this.type){var p=this.leftPadding+this.xLength*(i+.5);e.beginPath(),e.arc(p,m,3*a,0,2*Math.PI,!0),e.fill(),0!==i&&(e.beginPath(),e.strokeStyle=this.datasets[o].fillColor||this.colorList[o],e.lineWidth=2*a,e.moveTo(p-this.xLength,f-r[i-1]*c),e.lineTo(p,m),e.stroke(),e.lineWidth=1*a),this.drawValue(r[i],p,m-l)}}}e.stroke()}},{key:"renderPieChart",value:function(){for(var e=this.ctx,t=this.labels.length,a=this.datasets[0],l=a.data,s=l.reduce((function(e,t){return e+t})),o=-Math.PI/2,r=this.canvas.width/2,i=this.canvas.height/2,n=0;n<t;n++){e.font=this.legend.font,this.legend.textWidth+=Math.ceil(e.measureText(this.labels[n]).width),e.beginPath(),e.strokeStyle=e.fillStyle=a.colorList&&a.colorList[n]||this.colorList[n],e.moveTo(r,i);var c=o,d=o+=l[n]/s*2*Math.PI;e.arc(r,i,this.radius,c,d),e.closePath(),e.fill();var u=(c+d)/2;this.drawPieValue(l[n],u)}"ring"===this.type&&(e.beginPath(),e.fillStyle=this.bgColor,e.arc(r,i,this.innerRadius,0,2*Math.PI),e.closePath(),e.fill())}},{key:"drawValue",value:function(e,t,l){var s=this.ctx;this.showValue&&(s.textBaseline="middle",s.font=12*a+"px Arial",s.textAlign="center",s.fillText(e,t,l))}},{key:"drawPieValue",value:function(e,t){var a=this.ctx;if(this.showValue){var s=this.canvas.width/2,o=this.canvas.height/2,r=Math.ceil(Math.abs(this.radius*Math.cos(t))),i=Math.floor(Math.abs(this.radius*Math.sin(t)));a.textBaseline="middle",this.showValue&&(t<=0?(a.textAlign="left",a.moveTo(s+r,o-i),a.lineTo(s+r+l,o-i-l),a.moveTo(s+r+l,o-i-l),a.lineTo(s+r+3*l,o-i-l),a.stroke(),a.fillText(e,s+r+3.5*l,o-i-l)):0<t&&t<=Math.PI/2?(a.textAlign="left",a.moveTo(s+r,o+i),a.lineTo(s+r+l,o+i+l),a.moveTo(s+r+l,o+i+l),a.lineTo(s+r+3*l,o+i+l),a.stroke(),a.fillText(e,s+r+3.5*l,o+i+l)):t>Math.PI/2&&t<Math.PI?(a.textAlign="right",a.moveTo(s-r,o+i),a.lineTo(s-r-l,o+i+l),a.moveTo(s-r-l,o+i+l),a.lineTo(s-r-3*l,o+i+l),a.stroke(),a.fillText(e,s-r-3.5*l,o+i+l)):(a.textAlign="right",a.moveTo(s-r,o-i),a.lineTo(s-r-l,o-i-l),a.moveTo(s-r-l,o-i-l),a.lineTo(s-r-3*l,o-i-l),a.stroke(),a.fillText(e,s-r-3.5*l,o-i-l)))}}},{key:"drawBackground",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:"drawTitle",value:function(){var e=this.title;if(e.text){var t=this.ctx;t.beginPath(),t.font=e.font,t.textAlign="center",t.fillStyle=e.color,"top"===e.position?(t.textBaseline="top",t.fillText(e.text,this.canvas.width/2,e.top)):(t.textBaseline="bottom",t.fillText(e.text,this.canvas.width/2,this.canvas.height-e.bottom))}}},{key:"drawXAxis",value:function(){var e=this.ctx,t=this.canvas.height-this.bottomPadding+.5;e.beginPath(),e.strokeStyle=this.axisColor,e.moveTo(this.leftPadding,t),e.lineTo(this.canvas.width-this.rightPadding,t),e.stroke(),this.drawXPoint()}},{key:"drawXPoint",value:function(){var e=this.ctx;e.beginPath(),e.font=12*a+"px Microsoft YaHei",e.textAlign=this.xRorate?"right":"center",e.textBaseline="top",e.fillStyle=this.axisColor;for(var t=0;t<this.labels.length;t++){var o=this.labels[t],r=this.leftPadding+this.xLength*(t+1)+.5,i=this.canvas.height-this.bottomPadding;this.showGrid?(e.strokeStyle=this.gridColor,e.moveTo(r,i),e.lineTo(r,this.topPadding+l)):(e.moveTo(r,i),e.lineTo(r,i-s)),e.stroke(),e.save(),e.translate(r-this.xLength/2,i+s),e.rotate(-this.xRorate*Math.PI/180),e.fillText(o,0,0),e.restore()}}},{key:"drawYAxis",value:function(){var e=this.ctx;e.beginPath(),e.strokeStyle=this.axisColor,e.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),e.lineTo(this.leftPadding-.5,this.topPadding+.5),e.stroke(),this.drawYPoint()}},{key:"drawYPoint",value:function(){var e=this.ctx;e.font=12*a+"px Microsoft YaHei",e.textAlign="right",e.textBaseline="middle",e.beginPath();for(var t=0;t<this.yEqual;t++){var o=this.leftPadding,r=this.canvas.height-this.bottomPadding-this.yLength*(t+1)+.5;this.showGrid?(e.strokeStyle=this.gridColor,e.moveTo(o,r),e.lineTo(this.canvas.width-this.rightPadding-l,r)):(e.strokeStyle=this.axisColor,e.moveTo(o-s,r),e.lineTo(o,r)),e.stroke(),e.save(),e.fillStyle=this.axisColor,e.translate(o-l,r),e.rotate(-this.yRorate*Math.PI/180),e.fillText(this.ySpace*(t+1),0,0),e.restore()}}},{key:"drawLegend",value:function(){var e=this.legend;if(e.display){var t=this.ctx,a="pie"===this.type||"ring"===this.type;t.beginPath(),t.font=e.font,t.textAlign="left",t.textBaseline="middle";for(var o=a?this.labels.length:this.datasets.length,r=(this.canvas.width-(this.legend.textWidth+(5*o-2)*l))/2,i=0,n=0;n<o;n++){var c=a?this.datasets[0]:this.datasets[n],d=(a?this.labels[n]:c.label)||"";t.fillStyle=c.colorList&&c.colorList[n]||c.fillColor||this.colorList[n],"top"===e.position?(this.drawLegendIcon(r+5*l*n+i,e.top-s,2*l,l),t.fillStyle=e.color,t.fillText(d,r+(5*n+3)*l+i,e.top)):"bottom"===e.position?(this.drawLegendIcon(r+5*l*n+i,this.canvas.height-e.bottom-s,2*l,l),t.fillStyle=e.color,t.fillText(d,r+(5*n+3)*l+i,this.canvas.height-e.bottom)):(t.fillRect(l,e.top+2*l*n,2*l,l),t.fillStyle=e.color,t.fillText(d,4*l,e.top+2*l*n+.5*l)),i+=Math.ceil(t.measureText(d).width)}}}},{key:"drawLegendIcon",value:function(e,t,o,r){var i=this.ctx;"line"===this.type?(i.beginPath(),i.strokeStyle=i.fillStyle,i.lineWidth=2*a,i.moveTo(e,t+s),i.lineTo(e+2*l,t+s),i.stroke(),i.lineWidth=1*a,i.arc(e+l,t+s,3*a,0,2*Math.PI,!0),i.fill()):i.fillRect(e,t,o,r)}}]),o}()}))},b886:function(e,t,a){"use strict";var l=a("342c"),s=a.n(l);s.a},bab0:function(e,t,a){"use strict";var l=a("c3bb"),s=a.n(l);s.a},bd86:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var l=a("85f2"),s=a.n(l);function o(e,t,a){return t in e?s()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},c058:function(e,t,a){},c1fb:function(e,t,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var l=a("bd86"),s=a("4328"),o=a.n(s),r=a("bc3a"),i=a.n(r);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=i.a.create({baseURL:"",timeout:3e4}),u=[],f=i.a.CancelToken,m=["/huizhouanalysis/queryData/basechartsData.do","/huizhouanalysis/queryData/wholoPointData.do","/huizhouanalysis/queryData/combineChartsData.do"],p=function(e){for(var t in u)u[t].u===e.url&&(u[t].f(),u.splice(t,1))},b=function(e){for(var t=!0,a=0;a<m.length;a++)if(m[a]===e){t=!1;break}return t};d.interceptors.request.use((function(e){return"post"===e.method?e.data=o.a.stringify(c({},e.data)):e.params=c({},e.params),p(e),e.cancelToken=new f((function(t){b(e.url)?u.push({u:e.url,f:t}):console.info("过滤多个同时相同的请求url")})),e}),(function(e){Promise.reject(e)})),d.interceptors.response.use((function(e){return p(e.config),e}),(function(e){console.log("error"),console.log(e),console.log(JSON.stringify(e));var t="服务异常！";return console.error(t),Promise.reject(e)})),t["a"]=d},c26c:function(e,t,a){},c3bb:function(e,t,a){},cf3b:function(e,t,a){},d22a:function(e,t,a){"use strict";var l=a("f0dc"),s=a.n(l);s.a},d233:function(e,t,a){"use strict";var l=Object.prototype.hasOwnProperty,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var l=[],s=0;s<t.length;++s)"undefined"!==typeof t[s]&&l.push(t[s]);a.obj[a.prop]=l}}return t},r=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},l=0;l<e.length;++l)"undefined"!==typeof e[l]&&(a[l]=e[l]);return a},i=function e(t,a,s){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if("object"!==typeof t)return[t,a];(s.plainObjects||s.allowPrototypes||!l.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!==typeof t)return[t].concat(a);var o=t;return Array.isArray(t)&&!Array.isArray(a)&&(o=r(t,s)),Array.isArray(t)&&Array.isArray(a)?(a.forEach((function(a,o){l.call(t,o)?t[o]&&"object"===typeof t[o]?t[o]=e(t[o],a,s):t.push(a):t[o]=a})),t):Object.keys(a).reduce((function(t,o){var r=a[o];return l.call(t,o)?t[o]=e(t[o],r,s):t[o]=r,t}),o)},n=function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},d=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",l=0;l<t.length;++l){var o=t.charCodeAt(l);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=t.charAt(l):o<128?a+=s[o]:o<2048?a+=s[192|o>>6]+s[128|63&o]:o<55296||o>=57344?a+=s[224|o>>12]+s[128|o>>6&63]+s[128|63&o]:(l+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(l)),a+=s[240|o>>18]+s[128|o>>12&63]+s[128|o>>6&63]+s[128|63&o])}return a},u=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],l=0;l<t.length;++l)for(var s=t[l],r=s.obj[s.prop],i=Object.keys(r),n=0;n<i.length;++n){var c=i[n],d=r[c];"object"===typeof d&&null!==d&&-1===a.indexOf(d)&&(t.push({obj:r,prop:c}),a.push(d))}return o(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},m=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:r,assign:n,compact:u,decode:c,encode:d,isBuffer:m,isRegExp:f,merge:i}},d4a1:function(e,t,a){"use strict";var l=a("6f86"),s=a.n(l);s.a},d9db:function(e,t,a){},da71:function(e,t,a){"use strict";var l={dataUrl:"http://127.0.0.1:8084/sharingdata"};t["a"]=l},defd:function(e,t,a){"use strict";var l=a("f194"),s=a.n(l);s.a},e846:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},[a("el-option",{key:"",attrs:{label:"无",value:""}}),a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户账号",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加消费业务")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"私钥:"}},[a("el-input",{model:{value:t.row.private_key,callback:function(a){e.$set(t.row,"private_key",a)},expression:"props.row.private_key"}})],1),a("el-form-item",{attrs:{label:"公钥:"}},[a("el-input",{model:{value:t.row.public_key,callback:function(a){e.$set(t.row,"public_key",a)},expression:"props.row.public_key"}})],1),a("el-form-item",{attrs:{label:"用户密码:"}},[a("span",[e._v(e._s(t.row.password))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户账号"}}),a("el-table-column",{attrs:{prop:"name",label:"用户姓名"}}),a("el-table-column",{attrs:{prop:"typeName",label:"用户类型"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"createName",label:"操作员"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"70%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.userid,callback:function(t){e.$set(e.form,"userid",t)},expression:"form.userid"}}),a("el-form-item",{attrs:{label:"用户账号"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.usernameClass,style:e.usernameColor})])],1)],1),a("el-form-item",{attrs:{label:"用户密码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型"},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]:[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"用户类型",disabled:!0},on:{change:e.getUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{key:"1",attrs:{label:"管理员",value:"1"}}),a("el-option",{key:"2",attrs:{label:"生产者",value:"2"}}),a("el-option",{key:"3",attrs:{label:"消费者",value:"3"}})],1)]],2),a("el-col",{attrs:{span:1}})],1)],1),a("div",{style:e.ConsumeruserStyle,attrs:{id:"Consumeruser"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("消费的业务")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handleConsumerEdit(-1,null)}}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.Consumerusers,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"business_code",label:"业务代码"}}),a("el-table-column",{attrs:{prop:"fields",label:"业务字段"}}),a("el-table-column",{attrs:{prop:"push",label:"是否推送"}}),a("el-table-column",{attrs:{prop:"pushadress",label:"推送的地址"}}),a("el-table-column",{attrs:{prop:"pushtopic",label:"推送频道"}}),a("el-table-column",{attrs:{prop:"pushtag",label:"推送tag"}}),a("el-table-column",{attrs:{prop:"oldaddress",label:"获取数据地址"}}),a("el-table-column",{attrs:{prop:"overdueteime",label:"到期时间"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleConsumerEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleConsumerDataDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),a("div",{style:e.ProduceruserStyle,attrs:{id:"Produceruser"}},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.business_code,callback:function(t){e.$set(e.producer,"business_code",t)},expression:"producer.business_code"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.business_codeClass,style:e.business_codeColor})])],1)],1),a("el-form-item",{attrs:{label:"业务名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.producer.business_name,callback:function(t){e.$set(e.producer,"business_name",t)},expression:"producer.business_name"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据表名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.userid?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.producer.tableName,callback:function(t){e.$set(e.producer,"tableName",t)},expression:"producer.tableName"}})]],2),a("el-col",{attrs:{span:1}},[a("i",{class:e.tableNameClass,style:e.tableNameColor})])],1)],1),a("el-form-item",{attrs:{label:"数据接收地址","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.address,callback:function(t){e.$set(e.producer,"address",t)},expression:"producer.address"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据接收的格式","label-width":"110px"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.producer.dataformat,callback:function(t){e.$set(e.producer,"dataformat",t)},expression:"producer.dataformat"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设计表")]),""==e.form.userid?[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-lx-roundadd",type:"text"},on:{click:function(t){return e.handlefieldEdit(-1,null)}}},[e._v("添加字段")])]:void 0],2),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableoffields,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"fieldNamekey",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"fieldTypekey",label:"字段类型"}}),a("el-table-column",{attrs:{prop:"fieldLengthkey",label:"字段长度"}}),a("el-table-column",{attrs:{prop:"decimalkey",label:"字段小数点数"}}),a("el-table-column",{attrs:{prop:"nonullkey",label:"是否为空",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"commentkey",label:"数据描述"}}),a("el-table-column",{attrs:{prop:"primary_key",label:"主键",formatter:e.formatBoolean,"show-overflow-tooltip":!0}}),""==e.form.userid?[a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handlefieldEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handlefieldDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3654279460)})]:void 0],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveadd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑字段",visible:e.editfieldVisible,width:"30%"},on:{"update:visible":function(t){e.editfieldVisible=t}}},[a("el-form",{ref:"Tableoffield",attrs:{model:e.Tableoffield}},[a("el-form-item",{attrs:{label:"字段名称","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{blur:e.verificationfield},model:{value:e.Tableoffield.fieldNamekey,callback:function(t){e.$set(e.Tableoffield,"fieldNamekey",t)},expression:"Tableoffield.fieldNamekey"}})],1),a("el-col",{attrs:{span:2}},[a("i",{class:e.fieldNamekeyClass,style:e.fieldNamekeyColor})])],1)],1),a("el-form-item",{attrs:{label:"字段类型","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段类型"},on:{change:e.verificationfield},model:{value:e.Tableoffield.fieldTypekey,callback:function(t){e.$set(e.Tableoffield,"fieldTypekey",t)},expression:"Tableoffield.fieldTypekey"}},[a("el-option",{key:"varchar",attrs:{label:"varchar",value:"varchar"}}),a("el-option",{key:"longtext",attrs:{label:"longtext",value:"longtext"}}),a("el-option",{key:"double",attrs:{label:"double",value:"double"}}),a("el-option",{key:"int",attrs:{label:"int",value:"int"}}),a("el-option",{key:"float",attrs:{label:"float",value:"float"}}),a("el-option",{key:"datetime",attrs:{label:"datetime",value:"datetime"}}),a("el-option",{key:"date",attrs:{label:"date",value:"date"}})],1)],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段长度","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.fieldLengthkey,callback:function(t){e.$set(e.Tableoffield,"fieldLengthkey",t)},expression:"Tableoffield.fieldLengthkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"字段小数点数","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.decimalkey,callback:function(t){e.$set(e.Tableoffield,"decimalkey",t)},expression:"Tableoffield.decimalkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"数据描述","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Tableoffield.commentkey,callback:function(t){e.$set(e.Tableoffield,"commentkey",t)},expression:"Tableoffield.commentkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否为空","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.Tableoffield.nonullkey,callback:function(t){e.$set(e.Tableoffield,"nonullkey",t)},expression:"Tableoffield.nonullkey"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"主键","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.Tableoffield.primary_key,callback:function(t){e.$set(e.Tableoffield,"primary_key",t)},expression:"Tableoffield.primary_key"}})],1),a("el-col",{attrs:{span:2}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editfieldVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savefieldEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editConsumerVisible,width:"60%"},on:{"update:visible":function(t){e.editConsumerVisible=t}}},[a("el-form",{ref:"consumer",attrs:{model:e.consumer}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.consumer.id,callback:function(t){e.$set(e.consumer,"id",t)},expression:"consumer.id"}}),a("el-form-item",{attrs:{label:"业务代码","label-width":"110px"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"业务代码"},on:{change:e.businesscheck},model:{value:e.consumer.business_code,callback:function(t){e.$set(e.consumer,"business_code",t)},expression:"consumer.business_code"}},e._l(e.business,(function(e){return a("el-option",{key:e.business_code,attrs:{label:e.business_name,value:e.business_code}})})),1)],1),a("el-form-item",{attrs:{label:"业务字段","label-width":"110px"}},[[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.consumer.fields,callback:function(t){e.$set(e.consumer,"fields",t)},expression:"consumer.fields"}},e._l(e.businessfields,(function(t){return a("el-checkbox",{key:t.fieldNamekey,attrs:{label:t}},[e._v(e._s(t.commentkey))])})),1)]],2),a("el-form-item",{attrs:{label:"查询条件","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"字段名称"},model:{value:e.sqlckey,callback:function(t){e.sqlckey=t},expression:"sqlckey"}},e._l(e.businessfields,(function(e){return a("el-option",{key:e.fieldNamekey,attrs:{label:e.commentkey,value:e.fieldNamekey}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"判定条件"},model:{value:e.sqltype,callback:function(t){e.sqltype=t},expression:"sqltype"}},[a("el-option",{key:"=",attrs:{label:"=",value:"="}}),a("el-option",{key:"!=",attrs:{label:"!=",value:"!="}}),a("el-option",{key:"like",attrs:{label:"like",value:"like"}})],1),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"内容",clearable:""},model:{value:e.sqlcvalue,callback:function(t){e.sqlcvalue=t},expression:"sqlcvalue"}}),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"合并条件"},model:{value:e.sqlmerge,callback:function(t){e.sqlmerge=t},expression:"sqlmerge"}},[a("el-option",{key:"and",attrs:{label:"and",value:"and"}}),a("el-option",{key:"or",attrs:{label:"or",value:"or"}}),a("el-option",{key:"",attrs:{label:"",value:""}})],1),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.setsql(!0)}}},[e._v("添加")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.setsql(!1)}}},[e._v("清空")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"开启自定义查询","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.customize,callback:function(t){e.$set(e.consumer,"customize",t)},expression:"consumer.customize"}})],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[1==e.consumer.customize?[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容"},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]:[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4},placeholder:"请输入内容",disabled:!0},model:{value:e.consumer.sql,callback:function(t){e.$set(e.consumer,"sql",t)},expression:"consumer.sql"}})]],2),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"SQL备注","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-tag",{attrs:{type:"warning"}},[e._v("动态传参的输入格式${xxxx} 例如：${roadId}")])],1),a("el-col",{attrs:{span:2}})],1)],1),a("el-form-item",{attrs:{label:"是否推送","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:21}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.verificationfield},model:{value:e.consumer.push,callback:function(t){e.$set(e.consumer,"push",t)},expression:"consumer.push"}})],1),a("el-col",{attrs:{span:2}})],1)],1),1==e.consumer.push?[a("el-form-item",{attrs:{label:"推送地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushadress,callback:function(t){e.$set(e.consumer,"pushadress",t)},expression:"consumer.pushadress"}})],1),a("el-form-item",{attrs:{label:"推送频道","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtopic,callback:function(t){e.$set(e.consumer,"pushtopic",t)},expression:"consumer.pushtopic"}})],1),a("el-form-item",{attrs:{label:"推送tag","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.consumer.pushtag,callback:function(t){e.$set(e.consumer,"pushtag",t)},expression:"consumer.pushtag"}})],1)]:void 0,a("el-form-item",{attrs:{label:"数据获取地址","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:"",disabled:!0},model:{value:e.consumer.oldaddress,callback:function(t){e.$set(e.consumer,"oldaddress",t)},expression:"consumer.oldaddress"}})],1),a("el-form-item",{attrs:{label:"到期时间","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:""},model:{value:e.consumer.overdueteime,callback:function(t){e.$set(e.consumer,"overdueteime",t)},expression:"consumer.overdueteime"}})],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editConsumerVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConsumerEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=a("10cb"),r=a("f0dd"),i={name:"basetable",data:function(){return{query:{username:"",type:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,pageTotal:0,form:{},producer:{},consumer:{},idx:-1,id:-1,ProduceruserStyle:"display:none",ConsumeruserStyle:"display:none",editfieldVisible:!1,tableoffields:[],Consumerusers:[],Tableoffield:{},fieldEditOK:!0,fieldNamekeyClass:"el-icon-circle-close",fieldNamekeyColor:"color:#F56C6C",business_codeClass:"el-icon-circle-close",business_codeColor:"color:#F56C6C",tableNameClass:"el-icon-circle-close",tableNameColor:"color:#F56C6C",usernameClass:"el-icon-circle-close",usernameColor:"color:#F56C6C",editConsumerVisible:!1,business:[],businessfields:[],checkAll:!1,isIndeterminate:!0,editConsumerparamVisible:!1,sqlmerge:"",sqlckey:"",sqltype:"",sqlcvalue:""}},created:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},methods:{getData:function(e,t,a){var l=this,s={};s={username:e,type:t,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},s["page"]=a;var r=[];Object(o["c"])(s).then((function(e){if(200===e.data.code){var t=e.data.data;t.map((function(e,t){var a="",l=e.type;a="1"==l?"管理员":"2"==l?"生产者":"消费者",e["typeName"]=a,r.push(e)})),l.tableData=r,l.pageTotal=e.data.total||10}else 404===e.data.code?(l.tableData=[],l.pageTotal=e.data.total||10):209===e.data.code&&(l.$message.error("登录失效，请重新登录！"),l.$router.push("/login"))}))},handleSearch:function(){this.getData(this.$data.query.username,this.$data.query.type,1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteUserInfo(t.userid),a.$set(a.query,"pageIndex",1)})).catch((function(){}))},deleteUserInfo:function(e){var t=this;if(null!=e){var a={};a={userid:e,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["a"])(a).then((function(e){200===e.data.code?(t.getData(t.$data.query.username,t.$data.query.type,1),t.$message.success("删除成功")):t.$message.error("请求数据异常！")}))}else this.$message.error("未获取到用户id信息")},handleEdit:function(e,t){var a=this;if(-1==e){var l={userid:"",username:"",password:"",name:"",type:""};this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none",this.usernameClass="el-icon-circle-close",this.usernameColor="color:#F56C6C",this.business_codeClass="el-icon-circle-close",this.business_codeColor="color:#F56C6C",this.tableNameClass="el-icon-circle-close",this.tableNameColor="color:#F56C6C",this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.tableoffields=[],this.producer={},this.form=l,this.addVisible=!0}else{if(this.usernameClass="el-icon-circle-check",this.usernameColor="color:#67C23A",this.business_codeClass="el-icon-circle-check",this.business_codeColor="color:#67C23A",this.tableNameClass="el-icon-circle-check",this.tableNameColor="color:#67C23A",this.idx=e,this.form=t,1==this.form.type)this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none";else if(2==this.form.type){this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none";var s={};s={userid:this.form.userid,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(e){if(200===e.data.code){var t=e.data.data[0];a.producer=t,a.tableoffields=t.tableoffields,console.info(t),a.pageTotal=e.data.total||10}else 404===e.data.code?(a.tableData=[],a.pageTotal=e.data.total||10):209===e.data.code&&(a.$message.error("登录失效，请重新登录！"),a.$router.push("/login"))}))}else 3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block");this.addVisible=!0}},saveadd:function(){var e=this;this.producer["tableoffields"]=this.tableoffields,this.form["produceruser"]=this.producer,this.form["loginName"]=localStorage.getItem("ms_username"),this.form["token"]=localStorage.getItem("token");var t=this.verificationfield();t?Object(o["b"])(this.form).then((function(t){200===t.data.code?(e.getData(e.$data.query.username,e.$data.query.type,1),e.$set(e.query,"pageIndex",1),e.addVisible=!1,e.$message.success("保存成功")):(e.$message.error("请求数据异常！"),e.addVisible=!0)})):(this.$message.error("请检查表单！"),this.addVisible=!0)},getUserType:function(){1==this.form.type?(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:none"):2==this.form.type?(this.ProduceruserStyle="display:block",this.ConsumeruserStyle="display:none"):3==this.form.type&&(this.ProduceruserStyle="display:none",this.ConsumeruserStyle="display:block")},handlefieldEdit:function(e,t){-1==e?(this.Tableoffield={tableNamekey:"",fieldNamekey:"",fieldTypekey:"varchar",fieldLengthkey:"255",decimalkey:"0",nonullkey:!0,commentkey:"",primary_key:!1},this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.fieldEditOK=!1):(this.Tableoffield=t,this.fieldEditOK=!0),this.editfieldVisible=!0},handlefieldDelete:function(e,t){this.editfieldVisible=!1;var a=[];if(""==t.tableNamekey||void 0==t.tableNamekey)for(var l=0;l<this.tableoffields.length;l++)this.tableoffields[l]!=t&&a.push(this.tableoffields[l]);else for(l=0;l<this.tableoffields.length;l++)this.tableoffields[l].id==t.id||a.push(this.tableoffields[l]);this.tableoffields=a},savefieldEdit:function(){var e=this.verificationfield();e?(this.fieldEditOK||this.tableoffields.push(this.Tableoffield),this.Tableoffield={},this.editfieldVisible=!1):this.$message.error("请检查表单！")},verificationfield:function(){var e=this,t=!0;if(void 0!=this.form.username&&""!=this.form.username){if("el-icon-circle-close"==this.usernameClass)if(this.form.username.length>0){var a={};a={username:this.form.username,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(o["c"])(a).then((function(a){200==a.data.code?(e.usernameClass="el-icon-circle-close",e.usernameColor="color:#F56C6C",e.$message.error("用户名已存在，请重新输入！"),t=!1):404==a.data.code?(e.usernameClass="el-icon-circle-check",e.usernameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.business_code&&""!=this.producer.business_code){if("el-icon-circle-close"==this.business_codeClass)if(this.producer.business_code.length>0){var l={};l={business_code:this.producer.business_code,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(l).then((function(a){200==a.data.code?(e.business_codeClass="el-icon-circle-close",e.business_codeColor="color:#F56C6C",e.$message.error("业务代码已存在，请重新输入！"),t=!1):404==a.data.code?(e.business_codeClass="el-icon-circle-check",e.business_codeColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0!=this.producer.tableName&&""!=this.producer.tableName){if("el-icon-circle-close"==this.tableNameClass)if(this.producer.tableName.length>0){var s={};s={tableName:this.producer.tableName,loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(s).then((function(a){200==a.data.code?(e.tableNameClass="el-icon-circle-close",e.tableNameColor="color:#F56C6C",e.$message.error("业务表名称已存在，请重新输入！"),t=!1):404==a.data.code?(e.tableNameClass="el-icon-circle-check",e.tableNameColor="color:#67C23A"):(e.$message.error("请求数据异常！"),t=!1)}))}else t=!1}else t=!1;if(void 0==this.Tableoffield.fieldNamekey&&this.tableoffields.length>0);else{if(void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey){if(!this.fieldEditOK&&this.Tableoffield.fieldNamekey.length>0){var i=!1;if(this.tableoffields.length>0)for(var n=0;n<this.tableoffields.length;n++)if(this.tableoffields[n].fieldNamekey==this.Tableoffield.fieldNamekey){i=!0;break}i?(this.fieldNamekeyClass="el-icon-circle-close",this.fieldNamekeyColor="color:#F56C6C",this.$message.error("字段名称重复，请重新输入！"),t=!1):(this.fieldNamekeyClass="el-icon-circle-check",this.fieldNamekeyColor="color:#67C23A")}}else t=!1;void 0!=this.Tableoffield.commentkey&&""!=this.Tableoffield.commentkey?0==this.Tableoffield.commentkey.length&&(t=!1):t=!1,void 0!=this.Tableoffield.fieldNamekey&&""!=this.Tableoffield.fieldNamekey||0==this.tableoffields.length&&(t=!1),"longtext"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0,1==this.Tableoffield.primary_key&&(this.$message.error("该类型字段不能设置主键！"),this.Tableoffield.primary_key=!1,t=!1)):"date"==this.Tableoffield.fieldTypekey||"datetime"==this.Tableoffield.fieldTypekey||"double"==this.Tableoffield.fieldTypekey?(this.Tableoffield.fieldLengthkey=0,this.Tableoffield.decimalkey=0):0==this.Tableoffield.fieldLengthkey&&(this.Tableoffield.fieldLengthkey=255,this.Tableoffield.decimalkey=0),1==this.Tableoffield.primary_key&&("varchar"==this.Tableoffield.fieldTypekey?this.Tableoffield.fieldLengthkey>100&&(this.$message.error("字段长度大于100，请设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1):(this.$message.error("该类型字段不能设置主键，请选择varcahr类型字段，并长度设置小于100以下的数字！"),this.Tableoffield.primary_key=!1,t=!1))}return t},handleConsumerEdit:function(e,t){this.sqlckey="",this.sqltype="",this.sqlcvalue="",this.sqlmerge="",-1==e&&(this.consumer={id:"",business_code:"",fields:[],push:!1,customize:!1,pushadress:"",oldaddress:"",overdueteime:new Date,pushtopic:"",pushtag:"",sql:""}),this.getbusiness(),this.editConsumerVisible=!0},getbusiness:function(){var e=this,t={};t={loginName:localStorage.getItem("ms_username"),token:localStorage.getItem("token")},Object(r["a"])(t).then((function(t){200==t.data.code?e.business=t.data.data:404==t.data.code?e.business=[]:e.$message.error("请求数据异常！")}))},businesscheck:function(){for(var e=this.business,t=0;t<e.length;t++)if(e[t].business_code==this.consumer.business_code){this.businessfields=e[t].tableoffields;break}},handleCheckAllChange:function(e){this.consumer.fields=e?this.businessfields:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.consumer.fields.length,this.consumer.fields.length==this.businessfields.length&&t>0?this.isIndeterminate=!1:this.isIndeterminate=!0},setsql:function(e){1==e?(this.consumer.sql=this.consumer.sql+this.sqlckey+"  "+this.sqltype+"  '"+this.sqlcvalue+"'  "+this.sqlmerge+"  ",alert(this.consumer.sql)):this.consumer.sql=""},saveConsumerEdit:function(){this.Consumerusers.push(this.consumer)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData(this.query.citycode,e)},formatBoolean:function(e,t,a){var l="";return l=a?"是":"否",l}}},n=i,c=(a("227a"),a("2877")),d=Object(c["a"])(n,l,s,!1,null,"6d024148",null);t["default"]=d.exports},e877:function(e,t,a){"use strict";var l=a("4891"),s=a.n(l);s.a},ec14:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[l("div",{staticClass:"user-info"},[l("img",{staticClass:"user-avator",attrs:{src:a("7159"),alt:""}}),l("div",{staticClass:"user-info-cont"},[l("div",{staticClass:"user-info-name"},[e._v(e._s(e.name))]),l("div",[e._v(e._s(e.role))])])]),l("div",{staticClass:"user-info-list"},[e._v("\n                    上次登录时间：\n                    "),l("span",[e._v("2019-11-01")])]),l("div",{staticClass:"user-info-list"},[e._v("\n                    上次登录地点：\n                    "),l("span",[e._v("东莞")])])]),l("el-card",{staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("语言详情")])]),e._v("Vue\n                "),l("el-progress",{attrs:{percentage:71.3,color:"#42b983"}}),e._v("JavaScript\n                "),l("el-progress",{attrs:{percentage:24.1,color:"#f1e05a"}}),e._v("CSS\n                "),l("el-progress",{attrs:{percentage:13.7}}),e._v("HTML\n                "),l("el-progress",{attrs:{percentage:5.9,color:"#f56c6c"}})],1)],1),l("el-col",{attrs:{span:16}},[l("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[l("div",{staticClass:"grid-content grid-con-1"},[l("i",{staticClass:"el-icon-lx-people grid-con-icon"}),l("div",{staticClass:"grid-cont-right"},[l("div",{staticClass:"grid-num"},[e._v("1234")]),l("div",[e._v("用户访问量")])])])])],1),l("el-col",{attrs:{span:8}},[l("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[l("div",{staticClass:"grid-content grid-con-2"},[l("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),l("div",{staticClass:"grid-cont-right"},[l("div",{staticClass:"grid-num"},[e._v("321")]),l("div",[e._v("系统消息")])])])])],1),l("el-col",{attrs:{span:8}},[l("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[l("div",{staticClass:"grid-content grid-con-3"},[l("i",{staticClass:"el-icon-lx-goods grid-con-icon"}),l("div",{staticClass:"grid-cont-right"},[l("div",{staticClass:"grid-num"},[e._v("5000")]),l("div",[e._v("数量")])])])])],1)],1),l("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("待办事项")]),l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("添加")])],1),l("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:e.todoList}},[l("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),l("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",{staticClass:"todo-item",class:{"todo-item-del":t.row.status}},[e._v(e._s(t.row.title))])]}}])}),l("el-table-column",{attrs:{width:"60"}},[[l("i",{staticClass:"el-icon-edit"}),l("i",{staticClass:"el-icon-delete"})]],2)],1)],1)],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:12}},[l("el-card",{attrs:{shadow:"hover"}},[l("schart",{ref:"bar",staticClass:"schart",attrs:{canvasId:"bar",options:e.options}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-card",{attrs:{shadow:"hover"}},[l("schart",{ref:"line",staticClass:"schart",attrs:{canvasId:"line",options:e.options2}})],1)],1)],1)],1)},s=[],o=(a("ac6a"),a("7f7f"),a("f5ac")),r=(a("7ed4"),{name:"dashboard",data:function(){return{name:localStorage.getItem("ms_username"),todoList:[{title:"今天要修复100个bug",status:!1},{title:"今天要修复100个bug",status:!1},{title:"今天要写100行代码加几个bug吧",status:!1},{title:"今天要修复100个bug",status:!1},{title:"今天要修复100个bug",status:!0},{title:"今天要写100行代码加几个bug吧",status:!0}],data:[{name:"2018/09/04",value:1083},{name:"2018/09/05",value:941},{name:"2018/09/06",value:1139},{name:"2018/09/07",value:816},{name:"2018/09/08",value:327},{name:"2018/09/09",value:228},{name:"2018/09/10",value:1065}],options:{type:"bar",title:{text:"最近一周各品类销售图"},xRorate:25,labels:["周一","周二","周三","周四","周五"],datasets:[{label:"家电",data:[234,278,270,190,230]},{label:"百货",data:[164,178,190,135,160]},{label:"食品",data:[144,198,150,235,120]}]},options2:{type:"line",title:{text:"最近几个月各品类销售趋势图"},labels:["6月","7月","8月","9月","10月"],datasets:[{label:"家电",data:[234,278,270,190,230]},{label:"百货",data:[164,178,150,135,160]},{label:"食品",data:[74,118,200,235,90]}]}}},components:{Schart:o["a"]},computed:{role:function(){return"admin"===this.name?"超级管理员":"普通用户"}},methods:{changeDate:function(){var e=(new Date).getTime();this.data.forEach((function(t,a){var l=new Date(e-864e5*(6-a));t.name="".concat(l.getFullYear(),"/").concat(l.getMonth()+1,"/").concat(l.getDate())}))}}}),i=r,n=(a("d22a"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"66d92d35",null);t["default"]=c.exports},f0dc:function(e,t,a){},f0dd:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var l=a("c1fb"),s=a("da71"),o=function(e){return Object(l["a"])({url:s["a"]["dataUrl"]+"/getproducerinfos",method:"get",params:e})}},f194:function(e,t,a){},f419:function(e,t,a){},f5ac:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("canvas",{attrs:{id:e.canvasId}})])},s=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("b367"),i=a.n(r);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={props:{canvasId:{type:String,default:"",required:!0},options:{type:Object,required:!0}},mounted:function(){this.renderChart()},methods:{renderChart:function(){if(this.checkOptions()){var e=c({},this.options);new i.a(this.canvasId,e)}},checkOptions:function(){var e=this.options;return!(!e.datasets||!e.datasets.length)&&!(!e.labels||!e.labels.length)}},watch:{options:{handler:function(e,t){this.renderChart()},deep:!0}}},u=d,f=a("2877"),m=Object(f["a"])(u,l,s,!1,null,null,null);t["a"]=m.exports},fba9:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"数据存储名称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-lx-roundadd"},on:{click:function(t){return e.handleEdit(-1,null)}}},[e._v("添加数据存储")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"password",label:"密码"}}),a("el-table-column",{attrs:{prop:"host",label:"地址"}}),a("el-table-column",{attrs:{prop:"port",label:"端口"}}),a("el-table-column",{attrs:{prop:"database",label:"数据库"}}),a("el-table-column",{attrs:{prop:"sourcetypeid",label:"数据类型"}}),a("el-table-column",{attrs:{prop:"createtime",label:"修改时间"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-form-item",{attrs:{label:"数据库类型"}},[a("el-row",{attrs:{gutter:23}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sourcetypeid,callback:function(t){e.$set(e.form,"sourcetypeid",t)},expression:"form.sourcetypeid"}},e._l(e.sourcetypes,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})})),1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[""==e.form.id?[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]:[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]],2),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"端口"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"数据库"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.database,callback:function(t){e.$set(e.form,"database",t)},expression:"form.database"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-col",{attrs:{span:1}})],1)],1),a("el-form-item",{attrs:{label:"连接地址"}},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.remotejdbc_url,callback:function(t){e.$set(e.form,"remotejdbc_url",t)},expression:"form.remotejdbc_url"}})],1),a("el-col",{attrs:{span:1}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("365c")),r={name:"basetable",data:function(){return{query:{name:"",pageIndex:1,pageSize:10},pageTotal:0,sourcetypes:[],tableData:[],form:{},addVisible:!1}},created:function(){this.getData(),this.getsourcetypeData()},methods:{getData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.datasourceinfos,l={};l={name:e.$data.query.name,pageIndex:e.$data.query.pageIndex,pageSize:e.$data.query.pageSize,loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.tableData=a.data,e.pageTotal=a.total||10):404===a.code&&(e.tableData=[],e.pageTotal=a.total||10)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},getsourcetypeData:function(){var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.sourcetypeinfos,l={};l={loginName:localStorage.getItem("ms_username")},Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?e.sourcetypes=a.data:404===a.code&&(e.sourcetypes=[])})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)}))},handleSearch:function(){this.$data.query.pageIndex=1,this.getData()},handleEdit:function(e,t){if(-1==e){var a={id:"",name:"",username:"",password:"",host:"",port:"",database:"",sourcetypeid:"",createtime:"",remotejdbc_url:""};this.form=a,this.addVisible=!0}else this.form=t,this.addVisible=!0},saveEdit:function(){this.editVisible=!1;var e=this,t=window.ZHCJAppConfig.webURL,a=t+window.ZHCJAppConfig.API.savedatasourceinfo,l=e.form;l["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(a,l).then((function(t){var a=t;200==a.code?(e.getData(),e.$message.success("保存成功"),e.addVisible=!1):e.$message.error("请求数据异常！"+a.code)})).catch((function(t){e.$message.warning("亲，网络出现异常"),console.log(t)})),e.$set(e.query,"pageIndex",1)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.deleteInfo(t.id)})).catch((function(){}))},deleteInfo:function(e){if(null!=e){var t=this,a=window.ZHCJAppConfig.webURL,l=a+window.ZHCJAppConfig.API.deldatasourceinfo,s={id:e};s["loginName"]=localStorage.getItem("ms_username"),Object(o["a"])(l,s).then((function(e){var a=e;200==a.code?(t.getData(),t.$message.success("删除成功"),t.addVisible=!1,t.$set(t.query,"pageIndex",1)):t.$message.error("请求数据异常！"+a.code)})).catch((function(e){t.$message.warning("亲，网络出现异常"),console.log(e)}))}else this.$message.error("未获取到用户id信息")},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.$data.query.pageIndex=e,this.getData()}}},i=r,n=(a("a077"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,"692f8706",null);t["default"]=c.exports}}]);